<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
    
  
  <link href="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="开发配置," />





  <link rel="alternate" href="/atom.xml" title="Jerry's Blog - 碎碎念" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="花了好几天的时间，才迁移完git学习笔记，进行了重新整理，记录了常用操作。不知不觉Git已经用了2年的时间，虽然不久，但已经深深爱上了这个家伙~~~">
<meta name="keywords" content="开发配置">
<meta property="og:type" content="article">
<meta property="og:title" content="Git操作">
<meta property="og:url" content="http://myoss.github.io/2016/Git操作/index.html">
<meta property="og:site_name" content="Jerry&#39;s Blog - 碎碎念">
<meta property="og:description" content="花了好几天的时间，才迁移完git学习笔记，进行了重新整理，记录了常用操作。不知不觉Git已经用了2年的时间，虽然不久，但已经深深爱上了这个家伙~~~">
<meta property="og:image" content="http://myoss.github.io/images/git-trees.png">
<meta property="og:image" content="http://myoss.github.io/images/git-stage.png">
<meta property="og:updated_time" content="2017-02-12T09:53:04.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Git操作">
<meta name="twitter:description" content="花了好几天的时间，才迁移完git学习笔记，进行了重新整理，记录了常用操作。不知不觉Git已经用了2年的时间，虽然不久，但已经深深爱上了这个家伙~~~">
<meta name="twitter:image" content="http://myoss.github.io/images/git-trees.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://myoss.github.io/2016/Git操作/"/>





  <title>Git操作 | Jerry's Blog - 碎碎念</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-72820115-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0aed29b605b5125ea269404f8191671f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=500002217";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>









  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jerry's Blog - 碎碎念</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">我想就这样牵着 你的手不放开</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://myoss.github.io/2016/Git操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jerry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/6986459?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jerry's Blog - 碎碎念">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Git操作</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-01-20T14:37:00+08:00">
                2016-01-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/git/" itemprop="url" rel="index">
                    <span itemprop="name">git</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/Git操作/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/Git操作/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2016/Git操作/" class="leancloud_visitors" data-flag-title="Git操作">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">本文总阅读量
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>花了好几天的时间，才迁移完<a href="https://github.com/myoss/study/blob/master/git_notes.txt" target="_blank" rel="external">git学习笔记</a>，进行了重新整理，记录了常用操作。不知不觉<code>Git</code>已经用了2年的时间，虽然不久，但已经深深爱上了这个家伙~~~</p>
<a id="more"></a>
<h1 id="git-config"><a href="#git-config" class="headerlink" title="git config"></a>git config</h1><p><br>使用方法如下，如果没有指定位置参数省略的话，大部分命令默认为：<code>--local</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git config [&lt;--system&gt; | &lt;--global&gt; | &lt;--local&gt;] [option]</div></pre></td></tr></table></figure>
<h2 id="配置优先级"><a href="#配置优先级" class="headerlink" title="配置优先级"></a>配置优先级</h2><p>配置生效优先级：<code>1.</code> &gt; <code>2.</code> &gt; <code>3.</code>，即相同参数的配置优先级</p>
<ol>
<li><code>.git/config</code> 工作目录下的配置，使用：<code>git config --local</code></li>
<li><code>~/.gitconfig</code> 用户目录下的配置，使用：<code>git config --global</code></li>
<li><code>/etc/gitconfig</code> 对所有用户都适用的配置，使用：<code>git cofing --system</code></li>
</ol>
<h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><h3 id="查看生效的配置"><a href="#查看生效的配置" class="headerlink" title="查看生效的配置"></a>查看生效的配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">git config <span class="_">-l</span> <span class="comment">#查看所有配置</span></div><div class="line">git config --list <span class="comment">#查看所有配置</span></div><div class="line">git config --system <span class="_">-l</span> <span class="comment">#查看系统用户的所有配置</span></div><div class="line">git config --system --list <span class="comment">#查看系统用户的所有配置</span></div><div class="line">git config --global <span class="_">-l</span> <span class="comment">#查看当前用户的所有配置</span></div><div class="line">git config --global --list <span class="comment">#查看当前用户的所有配置</span></div><div class="line">git config --local <span class="_">-l</span> <span class="comment">#查看当前工作目录下的所有配置</span></div><div class="line">git config --local --list <span class="comment">#查看当前工作目录下的所有配置</span></div></pre></td></tr></table></figure>
<h3 id="查看某个参数的配置"><a href="#查看某个参数的配置" class="headerlink" title="查看某个参数的配置"></a>查看某个参数的配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git config user.name <span class="comment">#查看当前工作目录下的“用户名称”的配置</span></div><div class="line">git config --local user.name <span class="comment">#查看当前工作目录下的“用户名称”的配置，可以省略：--local</span></div><div class="line">git config --global user.name <span class="comment">#查看当前用户的“用户名称”的配置</span></div></pre></td></tr></table></figure>
<h3 id="设置用户名称和用户Email地址"><a href="#设置用户名称和用户Email地址" class="headerlink" title="设置用户名称和用户Email地址"></a>设置用户名称和用户Email地址</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git config --global user.name <span class="string">"John Doe"</span></div><div class="line">git config --global user.email johndoe@example.com</div><div class="line">git config --local user.name <span class="string">"John Doe"</span></div><div class="line">git config --local user.email johndoe@example.com</div></pre></td></tr></table></figure>
<h3 id="换行符：CRLF-LF"><a href="#换行符：CRLF-LF" class="headerlink" title="换行符：CRLF/LF"></a>换行符：CRLF/LF</h3><p>在Windows系统上，把它设置成<code>true</code>，这样当签出代码时，<code>LF</code>会被转换成<code>CRLF</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git config --global core.autocrlf <span class="literal">true</span></div></pre></td></tr></table></figure>
<p>Linux或Mac系统上，因此你不想Git在签出文件时进行自动的转换；当一个以<code>CRLF</code>为行结束符的文件不小心被引入时你肯定想进行修正，设置成<code>input</code>来告诉Git在提交时把<code>CRLF</code>转换成<code>LF</code>，签出时不转换</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git config --global core.autocrlf input</div></pre></td></tr></table></figure>
<p>如果仅运行在Windows上的项目，可以设置<code>false</code>取消此功能，把回车符记录在库中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git config --global core.autocrlf <span class="literal">false</span></div></pre></td></tr></table></figure>
<h3 id="换行符：SafeCRLF"><a href="#换行符：SafeCRLF" class="headerlink" title="换行符：SafeCRLF"></a>换行符：SafeCRLF</h3><p>拒绝提交包含混合换行符的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git config --global core.safecrlf <span class="literal">true</span></div></pre></td></tr></table></figure>
<p>允许提交包含混合换行符的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git config --global core.safecrlf <span class="literal">false</span></div></pre></td></tr></table></figure>
<p>提交包含混合换行符的文件时给出警告</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git config --global core.safecrlf warn</div></pre></td></tr></table></figure>
<h3 id="core-quotepath"><a href="#core-quotepath" class="headerlink" title="core.quotepath"></a>core.quotepath</h3><p>在使用git的时候，经常会碰到有一些中文文件名或者路径被转义成\xx\xx\xx之类的，此时可以通过git的配置来改变默认转义</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git config --global core.quotepath <span class="literal">false</span></div></pre></td></tr></table></figure>
<h3 id="其它配置"><a href="#其它配置" class="headerlink" title="其它配置"></a>其它配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">git config --global core.editor vim <span class="comment">#设置文本编辑器</span></div><div class="line">git config --global color.ui <span class="literal">true</span></div><div class="line">git config --global alias.st status <span class="comment">#设置别名</span></div><div class="line">git config receive.denyNonFastForwards <span class="literal">true</span> <span class="comment">#禁止非快进试推送</span></div><div class="line">git config --global merge.tool kdiff3</div><div class="line">git config --global diff.word.textconv strings <span class="comment">#在比较前把Word文件转换成文本文件</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="工作区"><a href="#工作区" class="headerlink" title="工作区"></a>工作区</h1><hr>
<h1 id="暂存区"><a href="#暂存区" class="headerlink" title="暂存区"></a>暂存区</h1><p><br>暂存区，又称为<code>--stage</code>或<code>--index</code>，是一个介于工作区和版本库的中间状态，当执行提交时，实际上是将暂存区的内容提交到版本库中。</p>
<hr>
<h1 id="版本库"><a href="#版本库" class="headerlink" title="版本库"></a>版本库</h1><h2 id="工作区-暂存区-版本库，三者的关系图"><a href="#工作区-暂存区-版本库，三者的关系图" class="headerlink" title="工作区/暂存区/版本库，三者的关系图"></a>工作区/暂存区/版本库，三者的关系图</h2><p><img src="/images/git-trees.png" alt=""><br><img src="/images/git-stage.png" alt=""></p>
<hr>
<h1 id="HEAD"><a href="#HEAD" class="headerlink" title="HEAD"></a>HEAD</h1><p><br><code>HEAD</code>是当前分支引用的指针，它总是指向该分支上的最后一次提交。这表示 <code>HEAD</code>将是下一次提交的父节点。通常，理解<code>HEAD</code>的最简方式，就是将它看做 你的上一次提交 的快照。<br>符号<code>^</code>可以用于指代父提交</p>
<blockquote>
<p><code>HEAD^</code>代表版本库中的上一次提交，即最近一次提交的父提交<br><code>HEAD^^</code>则代表<code>HEAD^</code>的父提交<br>对于一个提交有多个父提交，可以在符号<code>^</code>后面用数字表示是第几个父提交</p>
</blockquote>
<h2 id="查看快照"><a href="#查看快照" class="headerlink" title="查看快照"></a>查看快照</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">$ git cat-file -p HEAD</div><div class="line">tree 684768932f4b16ef45aa5e87793a76470fb8becb</div><div class="line">parent ae1ffd161d1ffb564ba2a0e87dae45ec63ea5eea</div><div class="line">author Jerry.Chen &lt;balabala@gmail.com&gt; 1453474460 +0800</div><div class="line">committer Jerry.Chen &lt;balabala@gmail.com&gt; 1453474460 +0800</div><div class="line"></div><div class="line">commit with <span class="_">-a</span></div><div class="line"></div><div class="line">``</div><div class="line"></div><div class="line"><span class="comment">## 查看引用日志，是`HEAD`头指针的变迁记录，而非`master`分支</span></div><div class="line"></div><div class="line">```bash</div><div class="line">$ git reflog</div><div class="line">ae1ffd1 HEAD@&#123;0&#125;: checkout: moving from b2 to master</div><div class="line">48c54d7 HEAD@&#123;1&#125;: checkout: moving from master to b2</div><div class="line">ae1ffd1 HEAD@&#123;2&#125;: checkout: moving from master to master</div></pre></td></tr></table></figure>
<h2 id="查看引用日志的输出"><a href="#查看引用日志的输出" class="headerlink" title="查看引用日志的输出"></a>查看引用日志的输出</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">$ git show HEAD@&#123;0&#125;</div><div class="line">commit ae1ffd161d1ffb564ba2a0e87dae45ec63ea5eea</div><div class="line">Merge: 3bce065 17ce0b6</div><div class="line">Author: Jerry &lt;jerry@china.com&gt;</div><div class="line">Date:   Sun Apr 20 16:05:08 2014 +0800</div><div class="line"></div><div class="line">    merge ...</div><div class="line"></div><div class="line">diff --cc hello.md</div><div class="line">index 1e644f0,11f9129..70b7830</div><div class="line">--- a/hello.md</div><div class="line">+++ b/hello.md</div><div class="line">@@@ -6,7 -6,7 +6,8 @@@</div><div class="line">  5 modify</div><div class="line">  6 modify by jerry</div><div class="line">  6 modify</div><div class="line"> +7 modify by jerry</div><div class="line">+ 7 modify</div><div class="line">  branch b1 1 modify  branch b1 3 modify</div><div class="line">  branch b1 2 modify  branch b1 4 modify</div><div class="line">  branch b2 1 modify</div></pre></td></tr></table></figure>
<hr>
<h1 id="SSH-Key"><a href="#SSH-Key" class="headerlink" title="SSH Key"></a>SSH Key</h1><h2 id="查看已经保存的SSH密钥"><a href="#查看已经保存的SSH密钥" class="headerlink" title="查看已经保存的SSH密钥"></a>查看已经保存的SSH密钥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ls -lart ~/.ssh</div></pre></td></tr></table></figure>
<h2 id="生成SSH密钥"><a href="#生成SSH密钥" class="headerlink" title="生成SSH密钥"></a>生成SSH密钥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa -C <span class="string">"your_email@example.com"</span></div></pre></td></tr></table></figure>
<p>查看公钥（<code>*.pub</code>）文件的内容，如果没有修改密钥的位置和保存的路径，直接复制<code>cat</code>出来的内容，粘帖到你需要用到的地方</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat ~/.ssh/id_rsa.pub</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h1><p><br>克隆操作，使用方法如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> [&lt;options&gt;] [--] &lt;repository&gt; [&lt;directory&gt;]</div></pre></td></tr></table></figure></p>
<h2 id="包含工作区的版本库"><a href="#包含工作区的版本库" class="headerlink" title="包含工作区的版本库"></a>包含工作区的版本库</h2><p>在本地创建一个<repository>的克隆工作区，所有的文件都会检出，如果设置了<code>[&lt;directory&gt;]</code>，则会将此名称做为克隆的文件夹名称</repository></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> &lt;repository&gt; [&lt;directory&gt;]</div></pre></td></tr></table></figure>
<h2 id="裸版本库，不包含工作区"><a href="#裸版本库，不包含工作区" class="headerlink" title="裸版本库，不包含工作区"></a>裸版本库，不包含工作区</h2><p>不包含工作区，直接就是版本库的内容，这样的版本库称为裸版本库。一般约定俗成裸版本库的目录名以<code>.git</code>为后缀，所以下面实例中将克隆出来的裸版本库目录名写作<code>&lt;directory.git&gt;</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> --bare &lt;repository&gt; &lt;directory.git&gt;</div><div class="line">git <span class="built_in">clone</span> --mirror &lt;repository&gt; &lt;directory.git&gt;</div></pre></td></tr></table></figure>
<p><code>git clone --mirror</code> 克隆出来的裸版本对上游版本进行了注册，这样可以在裸版本库中使用<code>git fetch</code>命令和上游版本库进行持续同步</p>
<h2 id="支持的多种协议"><a href="#支持的多种协议" class="headerlink" title="支持的多种协议"></a>支持的多种协议</h2><p>常用的一些协议，不是全部</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> file:///opt/git/project.git</div><div class="line">git <span class="built_in">clone</span> /opt/git/project.git</div><div class="line">git <span class="built_in">clone</span> ssh://user@server:project.git</div><div class="line">git <span class="built_in">clone</span> http[s]://example.com/gitproject.git</div><div class="line">git <span class="built_in">clone</span> git://example.com/path/to/repo.git/</div><div class="line">git <span class="built_in">clone</span> git@github.com:User/progit.git</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h1><h2 id="查看当前工作目录的远程仓库信息"><a href="#查看当前工作目录的远程仓库信息" class="headerlink" title="查看当前工作目录的远程仓库信息"></a>查看当前工作目录的远程仓库信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git remote -v</div><div class="line">git remote show <span class="comment">#查看当前工作目录所有的远程仓库的简写名称</span></div><div class="line">git remote show [name]</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">$ git remote -v</div><div class="line">origin  git@github.com:myoss/progit.git (fetch)</div><div class="line">origin  git@github.com:myoss/progit.git (push)</div><div class="line"></div><div class="line">$ git remote show</div><div class="line">origin</div><div class="line"></div><div class="line">$ git remote show origin</div><div class="line">* remote origin</div><div class="line">  Fetch URL: git@github.com:myoss/progit.git</div><div class="line">  Push  URL: git@github.com:myoss/progit.git</div><div class="line">  HEAD branch: master</div><div class="line">  Remote branches:</div><div class="line">    b1     tracked</div><div class="line">    master tracked</div><div class="line">  Local branches configured <span class="keyword">for</span> <span class="string">'git pull'</span>:</div><div class="line">    b1     merges with remote b1</div><div class="line">    master merges with remote master</div><div class="line">  Local refs configured <span class="keyword">for</span> <span class="string">'git push'</span>:</div><div class="line">    b1     pushes to b1     (up to date)</div><div class="line">    master pushes to master (up to date)</div></pre></td></tr></table></figure>
<h2 id="添加远程仓库"><a href="#添加远程仓库" class="headerlink" title="添加远程仓库"></a>添加远程仓库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git remote add [name] [url]</div></pre></td></tr></table></figure>
<h2 id="修改远程仓库的url地址"><a href="#修改远程仓库的url地址" class="headerlink" title="修改远程仓库的url地址"></a>修改远程仓库的url地址</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git remote <span class="built_in">set</span>-url &lt;name&gt; &lt;new_url&gt;</div></pre></td></tr></table></figure>
<h2 id="修改某个远程仓库的简写名称"><a href="#修改某个远程仓库的简写名称" class="headerlink" title="修改某个远程仓库的简写名称"></a>修改某个远程仓库的简写名称</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git remote rename &lt;old_name&gt; &lt;new_name&gt;</div></pre></td></tr></table></figure>
<h2 id="移除某个远程仓库的配置信息，不会删除任何文件"><a href="#移除某个远程仓库的配置信息，不会删除任何文件" class="headerlink" title="移除某个远程仓库的配置信息，不会删除任何文件"></a>移除某个远程仓库的配置信息，不会删除任何文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git remote rm | remove &lt;name&gt;</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h1><h2 id="拉取远程仓库的更新数据"><a href="#拉取远程仓库的更新数据" class="headerlink" title="拉取远程仓库的更新数据"></a>拉取远程仓库的更新数据</h2><p>只是将远端的数据拉到本地仓库，不会自动合并到当前工作分支。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git fetch &lt;repository-name&gt; &lt;branch-name&gt; <span class="comment">#repository-name：远程仓库的简写名称</span></div><div class="line">git fetch origin master</div></pre></td></tr></table></figure>
<h2 id="拉取所有远程仓库"><a href="#拉取所有远程仓库" class="headerlink" title="拉取所有远程仓库"></a>拉取所有远程仓库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git fetch --all</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h1><h2 id="获取远程仓库的更新数据，再自动合并到本地仓库中的当前分支"><a href="#获取远程仓库的更新数据，再自动合并到本地仓库中的当前分支" class="headerlink" title="获取远程仓库的更新数据，再自动合并到本地仓库中的当前分支"></a>获取远程仓库的更新数据，再自动合并到本地仓库中的当前分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git pull &lt;repository-name&gt; &lt;repository-branch-name&gt;</div><div class="line">git pull origin master</div></pre></td></tr></table></figure>
<p>相当于做了以下2步操作，如果有冲突，将会合并失败</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git fetch origin master</div><div class="line">git merge origin/master</div></pre></td></tr></table></figure>
<h2 id="获取远程仓库的更新数据，再自动合并到本地仓库中的其它分支"><a href="#获取远程仓库的更新数据，再自动合并到本地仓库中的其它分支" class="headerlink" title="获取远程仓库的更新数据，再自动合并到本地仓库中的其它分支"></a>获取远程仓库的更新数据，再自动合并到本地仓库中的其它分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git pull &lt;repository-name&gt; &lt;repository-branch-name&gt;:&lt;<span class="built_in">local</span>-branch-name&gt;</div><div class="line">git pull origin master:dev <span class="comment">#将远程仓库的master分支的更新，合并到本地的dev分支</span></div></pre></td></tr></table></figure>
<h2 id="获取远程仓库上所有的tag"><a href="#获取远程仓库上所有的tag" class="headerlink" title="获取远程仓库上所有的tag"></a>获取远程仓库上所有的tag</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git pull &lt;repository-name&gt; --tags</div><div class="line">git pull origin --tags</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h1><h2 id="将本地分支的更新，推送到远程仓库"><a href="#将本地分支的更新，推送到远程仓库" class="headerlink" title="将本地分支的更新，推送到远程仓库"></a>将本地分支的更新，推送到远程仓库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git push &lt;repository-name&gt; &lt;<span class="built_in">local</span>-branch-name&gt;:[repository-branch-name]</div><div class="line">git push origin <span class="built_in">local</span>-dev:remote-dev <span class="comment">#将本地的local-dev分支，推送到远程的remote-dev分支</span></div></pre></td></tr></table></figure>
<p>通常的操作，省略掉远程分支名<code>[repository-branch-name]</code>，则表示将本地分支推送与之存在“追踪关系”的远程分支（通常两者同名），如果该远程分支不存在，则会被新建。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git push &lt;repository-name&gt; &lt;<span class="built_in">local</span>-branch-name&gt;</div><div class="line">git push origin master <span class="comment">#将本地的master分支推送到远程仓库的master分支</span></div><div class="line">git push origin b1 <span class="comment">#如果远程仓库不存在b1分支，则会创建b1分支</span></div></pre></td></tr></table></figure>
<h2 id="删除远程仓库的分支"><a href="#删除远程仓库的分支" class="headerlink" title="删除远程仓库的分支"></a>删除远程仓库的分支</h2><p>第一种方式，如果省略<code>[local-branch-name]</code>，推送一个空的本地分支到远程分支，即删除掉[远程分支]，[本地分支]不会删除</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git push &lt;repository-name&gt; :&lt;repository-branch-name&gt;</div></pre></td></tr></table></figure>
<p>示例：删除远程仓库的<code>b3</code>分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git push origin :b3</div><div class="line">To git@github.com:myoss/progit.git</div><div class="line"> - [deleted]         b3</div></pre></td></tr></table></figure>
<p>第二种方式，使用<code>--delete</code>选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git push &lt;repository-name&gt; &lt;repository-branch-name&gt; --delete</div></pre></td></tr></table></figure>
<p>示例：删除远程仓库的<code>b2</code>分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git push origin b2 --delete</div><div class="line">To git@github.com:myoss/progit.git</div><div class="line"> - [deleted]         b2</div></pre></td></tr></table></figure>
<h2 id="强制更新，覆盖的方式推送"><a href="#强制更新，覆盖的方式推送" class="headerlink" title="强制更新，覆盖的方式推送"></a>强制更新，覆盖的方式推送</h2><p><b>注意：<font color="red">此操作非常危险，因为能够将历史记录抹除掉，比如远程分支有3个提交：1，2，3，而本地分支有2个提交：4，5，并且和远程分支的提交不一样，如果强制推送了之后，远程分支上原来的3个提交就会丢失掉，变成和本地分支一样。总而言之，请三思而后行！！！</font></b></p>
<p>强制更新，会在远程仓库产生一个“非块进式”的合并（non-fast-forward merge）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git push &lt;repository-name&gt; &lt;<span class="built_in">local</span>-branch-name&gt; <span class="_">-f</span> | --force</div></pre></td></tr></table></figure>
<p>操作注意：</p>
<ol>
<li>在github中，通常会关闭对<code>master</code>分支的强制更新，关闭保护的步骤：在项目的<code>Settings</code>下的<code>Branches</code>中，找到<code>Protected branches</code>，将其关闭掉即可。</li>
<li>在gitlab中，通常会关闭对<code>master</code>分支的强制更新，关闭保护的步骤：在项目的<code>Settings</code>下，找到<code>Protected branches</code>，将其关闭掉即可。</li>
</ol>
<h2 id="推送标签"><a href="#推送标签" class="headerlink" title="推送标签"></a>推送标签</h2><p>默认情况下，<code>git push</code>并不会把标签推送到远程仓库，只有通过显式命令才能推送标签到远程仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git push &lt;repository-name&gt; &lt;<span class="built_in">local</span>-tag-name&gt;</div></pre></td></tr></table></figure>
<h2 id="推送所有的标签"><a href="#推送所有的标签" class="headerlink" title="推送所有的标签"></a>推送所有的标签</h2><p>将本地所有的标签，推送到远程仓库（远程仓库没有的标签），注意是否有权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git push &lt;repository-name&gt; --tags</div></pre></td></tr></table></figure>
<h2 id="推送本地所有的分支，不包含标签"><a href="#推送本地所有的分支，不包含标签" class="headerlink" title="推送本地所有的分支，不包含标签"></a>推送本地所有的分支，不包含标签</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git push &lt;repository-name&gt; --all</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h1><h2 id="初始化本地仓库"><a href="#初始化本地仓库" class="headerlink" title="初始化本地仓库"></a>初始化本地仓库</h2><p>先在本地创建一个空目录，然后在创建的目录里使用<code>git init</code>初始化仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ mkdir my-work</div><div class="line">$ <span class="built_in">cd</span> my-work</div><div class="line">$ git init</div></pre></td></tr></table></figure>
<p>一步操作，仓库空目录，并初始化仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git init my-work</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h1><h2 id="添加未跟踪的文件"><a href="#添加未跟踪的文件" class="headerlink" title="添加未跟踪的文件"></a>添加未跟踪的文件</h2><p>使用<code>git add &lt;文件名1&gt;[,&lt;文件名2&gt;,&lt;文件名3&gt;]</code>添加未跟踪的文件，这不会提交到本地仓库中。如需要提交，使用<code>git commit -m &quot;提交的注释&quot;</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">$ git status <span class="_">-s</span> test.txt <span class="comment">#查看精简状态，显示有一个未跟踪的文件</span></div><div class="line">?? test.txt</div><div class="line"></div><div class="line">$ git status <span class="comment">#查看状态，现在有一个未跟踪的test.txt文件</span></div><div class="line">On branch master</div><div class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</div><div class="line">Untracked files:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">        test.txt</div><div class="line"></div><div class="line">nothing added to commit but untracked files present (use <span class="string">"git add"</span> to track)</div><div class="line"></div><div class="line">$ git add test.txt <span class="comment">#添加未跟踪的test.txt文件</span></div><div class="line"></div><div class="line">$ git status <span class="comment">#再次查看状态，test.txt文件已经放到暂存区了</span></div><div class="line">On branch master</div><div class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        new file:   test.txt</div><div class="line"></div><div class="line"></div><div class="line">$ git status <span class="_">-s</span> <span class="comment">#查看精简状态，显示有一个添加的文件</span></div><div class="line">A  test.txt</div><div class="line"></div><div class="line">$ git commit -m<span class="string">"添加文件：test.txt"</span> <span class="comment">#提交到本地git仓库中</span></div><div class="line">[master d14545d] 添加文件：test.txt</div><div class="line"> 1 file changed, 1 insertion(+)</div><div class="line"> create mode 100644 test.txt</div><div class="line"></div><div class="line">$ git status <span class="comment">#再次查看状态，刚才添加的文件已经提交，并且领先远程仓库一个提交</span></div><div class="line">On branch master</div><div class="line">Your branch is ahead of <span class="string">'origin/master'</span> by 1 commit.</div><div class="line">  (use <span class="string">"git push"</span> to publish your <span class="built_in">local</span> commits)</div><div class="line">nothing to commit, working directory clean</div><div class="line"></div><div class="line">$ git status <span class="_">-s</span> <span class="comment">#查看精简状态，无内容</span></div></pre></td></tr></table></figure>
<h2 id="添加已经追踪的文件"><a href="#添加已经追踪的文件" class="headerlink" title="添加已经追踪的文件"></a>添加已经追踪的文件</h2><p>同样的使用<code>git add &lt;文件名1&gt;[,&lt;文件名2&gt;,&lt;文件名3&gt;]</code>添加已跟踪的文件，这不会提交到本地仓库中。如需要提交，使用<code>git commit -m &quot;提交的注释&quot;</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">$ git status <span class="comment">#查看状态，有一个文件的内容修改了</span></div><div class="line">On branch master</div><div class="line">Your branch is ahead of <span class="string">'origin/master'</span> by 1 commit.</div><div class="line">  (use <span class="string">"git push"</span> to publish your <span class="built_in">local</span> commits)</div><div class="line">Changes not staged <span class="keyword">for</span> commit:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   test.txt</div><div class="line"></div><div class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</div><div class="line"></div><div class="line">$ git status <span class="_">-s</span> <span class="comment">#查看精简状态，显示有一个修改的文件，`M`字符的位置在第二列，颜色为红色</span></div><div class="line"> M test.txt</div><div class="line"></div><div class="line">$ git add test.txt <span class="comment">#将test.txt文件修改的内容放到暂存区</span></div><div class="line"></div><div class="line">$ git status <span class="comment">#再次查看状态，test.txt文件修改的内容已经放到暂存区了</span></div><div class="line">On branch master</div><div class="line">Your branch is ahead of <span class="string">'origin/master'</span> by 1 commit.</div><div class="line">  (use <span class="string">"git push"</span> to publish your <span class="built_in">local</span> commits)</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   test.txt</div><div class="line"></div><div class="line"></div><div class="line">$ git status <span class="_">-s</span> <span class="comment">#查看精简状态，显示有一个修改的文件，`M`字符的位置在第一列，颜色为绿色</span></div><div class="line">M  test.txt</div><div class="line"></div><div class="line">$ git commit -m<span class="string">"new update for test.txt"</span> <span class="comment">#提交到本地git仓库中</span></div><div class="line">[master 3a0f2d3] new update <span class="keyword">for</span> test.txt</div><div class="line"> 1 file changed, 1 insertion(+)</div><div class="line"></div><div class="line">$ git status <span class="comment">#再次查看状态，刚才添加的文件已经提交，并且领先远程仓库两个提交</span></div><div class="line">On branch master</div><div class="line">Your branch is ahead of <span class="string">'origin/master'</span> by 2 commits.</div><div class="line">  (use <span class="string">"git push"</span> to publish your <span class="built_in">local</span> commits)</div><div class="line">nothing to commit, working directory clean</div><div class="line"></div><div class="line">$ git status <span class="_">-s</span> <span class="comment">#查看精简状态，无内容</span></div></pre></td></tr></table></figure>
<h2 id="巧用git-add，快速回退测试代码"><a href="#巧用git-add，快速回退测试代码" class="headerlink" title="巧用git add，快速回退测试代码"></a>巧用<code>git add</code>，快速回退测试代码</h2><p>假设已经开发好了某个功能，这时候用<code>git add</code>添加，但不做<code>git commit</code></p>
<blockquote>
<p>场景一：这时候我再去添加些测试代码测试，比如<code>System.out.println</code>这种代码，测试下来发现我刚才<code>git add</code>的代码都是OK的，这时候我用<code>git checkout</code>就能快速安全的删掉刚才添加的测试代码。<br>场景二：我发现刚才<code>git add</code>的代码不够完美，修改完成之后，再次用<code>git add</code>添加，就会合并到上一次<code>git add</code>的代码中了，然后做为一次<code>git commit</code>。</p>
</blockquote>
<hr>
<h1 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h1><h2 id="查看当前分支的文件变化状态"><a href="#查看当前分支的文件变化状态" class="headerlink" title="查看当前分支的文件变化状态"></a>查看当前分支的文件变化状态</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git status</div></pre></td></tr></table></figure>
<h2 id="查看精简状态"><a href="#查看精简状态" class="headerlink" title="查看精简状态"></a>查看精简状态</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git status <span class="_">-s</span></div></pre></td></tr></table></figure>
<p><code>M</code>字符的位置在第二列，颜色为红色，表示工作区当前的文件与暂存区的文件相比有改动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git status <span class="_">-s</span></div><div class="line"> M  test.txt</div></pre></td></tr></table></figure>
<p><code>M</code>字符的位置在第一列，颜色为绿色，表示版本库中的文件与暂存区中的文件相比有改动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git status <span class="_">-s</span></div><div class="line">M  test.txt</div></pre></td></tr></table></figure>
<p>同时显示所在的分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git status -sb</div><div class="line"><span class="comment">## master...origin/master [ahead 2]</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="git-cherry"><a href="#git-cherry" class="headerlink" title="git cherry"></a>git cherry</h1><h2 id="查看本地分支领先远程仓库的提交"><a href="#查看本地分支领先远程仓库的提交" class="headerlink" title="查看本地分支领先远程仓库的提交"></a>查看本地分支领先远程仓库的提交</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git cherry</div><div class="line">+ d14545d3754498d664caea7672761305b59dd162</div><div class="line">+ 3a0f2d351733ed9d234e6f0498bc533c11048686</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h1><h2 id="比较工作区和暂存区"><a href="#比较工作区和暂存区" class="headerlink" title="比较工作区和暂存区"></a>比较工作区和暂存区</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git diff</div></pre></td></tr></table></figure>
<h2 id="逐词比较，而非默认的逐行比较"><a href="#逐词比较，而非默认的逐行比较" class="headerlink" title="逐词比较，而非默认的逐行比较"></a>逐词比较，而非默认的逐行比较</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git diff --word-diff</div></pre></td></tr></table></figure>
<h2 id="比较暂存区和HEAD（本地git仓库）"><a href="#比较暂存区和HEAD（本地git仓库）" class="headerlink" title="比较暂存区和HEAD（本地git仓库）"></a>比较暂存区和<code>HEAD</code>（本地git仓库）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git diff --cached</div><div class="line">git diff --staged</div></pre></td></tr></table></figure>
<h2 id="比较工作区和HEAD（本地git仓库）"><a href="#比较工作区和HEAD（本地git仓库）" class="headerlink" title="比较工作区和HEAD（本地git仓库）"></a>比较工作区和<code>HEAD</code>（本地git仓库）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git diff HEAD</div></pre></td></tr></table></figure>
<h2 id="比较两个提交"><a href="#比较两个提交" class="headerlink" title="比较两个提交"></a>比较两个提交</h2><p>用<code>SHA-1</code>值（前7位即可）比较两次提交之间的差异。注意顺序不一样，查看到的结果也会不一样。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git diff &lt;<span class="variable">$id1</span>&gt; &lt;<span class="variable">$id2</span>&gt;</div></pre></td></tr></table></figure>
<h2 id="比较两个分支"><a href="#比较两个分支" class="headerlink" title="比较两个分支"></a>比较两个分支</h2><p>只比较已经提交的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git diff &lt;branch1&gt; &lt;branch2&gt;</div></pre></td></tr></table></figure>
<h2 id="比较两个远程分支"><a href="#比较两个远程分支" class="headerlink" title="比较两个远程分支"></a>比较两个远程分支</h2><p>注意：可能需要先执行<code>git fetch</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git diff pro/master pro/b1</div></pre></td></tr></table></figure>
<h2 id="当前分支比较另外一个分支"><a href="#当前分支比较另外一个分支" class="headerlink" title="当前分支比较另外一个分支"></a>当前分支比较另外一个分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git diff &lt;branch2&gt; [current-branch]</div></pre></td></tr></table></figure>
<h2 id="比较之后，显示简要的增改行数统计"><a href="#比较之后，显示简要的增改行数统计" class="headerlink" title="比较之后，显示简要的增改行数统计"></a>比较之后，显示简要的增改行数统计</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git diff --stat</div><div class="line"> test.txt | 3 ++-</div><div class="line"> 1 file changed, 2 insertions(+), 1 deletion(-)</div></pre></td></tr></table></figure>
<h2 id="比较二进制文件差异"><a href="#比较二进制文件差异" class="headerlink" title="比较二进制文件差异"></a>比较二进制文件差异</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git diff --binary</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h1><h2 id="储藏当前工作区和暂存区修改的内容"><a href="#储藏当前工作区和暂存区修改的内容" class="headerlink" title="储藏当前工作区和暂存区修改的内容"></a>储藏当前工作区和暂存区修改的内容</h2><p>使用场景，当需要紧急处理一个bug时，工作区内容又没有完成，不适合提交，将未完成的修改保存到一个栈上，而你可以在任何时候重新应用这些改动。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git stash</div></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git stash</div><div class="line">Saved working directory and index state WIP on master: ae1ffd1 merge ...</div><div class="line">HEAD is now at ae1ffd1 merge ...</div></pre></td></tr></table></figure>
<h2 id="储藏的完整命令"><a href="#储藏的完整命令" class="headerlink" title="储藏的完整命令"></a>储藏的完整命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git stash [save [--patch] [-k|--[no-]keep-index] [-q|--quiet] [-u|--include-untracked] [<span class="_">-a</span>|--all] [&lt;message&gt;]</div></pre></td></tr></table></figure>
<p>如果需要在保存储藏的时候指定说明</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git stash save &lt;message&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git stash save <span class="string">"9 modify"</span></div><div class="line">Saved working directory and index state On master: 9 modify</div><div class="line">HEAD is now at ae1ffd1 merge ...</div></pre></td></tr></table></figure>
<p>使用参数<code>--patch</code>会显示工作区和<code>HEAD</code>的差异，通过对比差异文件的编辑决定在进度中最终要保存的工作的内容，通过编辑差异文件可以在进度中排除无关内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git stash --patch</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">$ git stash --patch</div><div class="line">diff --git a/hello.md b/hello.md</div><div class="line">index 70b7830..d866fb0 100644</div><div class="line">--- a/hello.md</div><div class="line">+++ b/hello.md</div><div class="line">@@ -10,4 +10,7 @@</div><div class="line"> 7 modify</div><div class="line"> branch b1 1 modify  branch b1 3 modify</div><div class="line"> branch b1 2 modify  branch b1 4 modify</div><div class="line">+10 modify 1</div><div class="line">+10 modify 2</div><div class="line">+10 modify 3</div><div class="line"> branch b2 1 modify</div><div class="line">Stash this hunk [y,n,q,a,d,/,e,?]? ?</div><div class="line">y - stash this hunk</div><div class="line">n - <span class="keyword">do</span> not stash this hunk</div><div class="line">q - quit; <span class="keyword">do</span> not stash this hunk or any of the remaining ones</div><div class="line">a - stash this hunk and all later hunks <span class="keyword">in</span> the file</div><div class="line">d - <span class="keyword">do</span> not stash this hunk or any of the later hunks <span class="keyword">in</span> the file</div><div class="line">g - select a hunk to go to</div><div class="line">/ - search <span class="keyword">for</span> a hunk matching the given regex</div><div class="line">j - leave this hunk undecided, see next undecided hunk</div><div class="line">J - leave this hunk undecided, see next hunk</div><div class="line">k - leave this hunk undecided, see previous undecided hunk</div><div class="line">K - leave this hunk undecided, see previous hunk</div><div class="line">s - split the current hunk into smaller hunks</div><div class="line">e - manually edit the current hunk</div><div class="line">? - <span class="built_in">print</span> <span class="built_in">help</span></div><div class="line">@@ -10,4 +10,7 @@</div><div class="line"> 7 modify</div><div class="line"> branch b1 1 modify  branch b1 3 modify</div><div class="line"> branch b1 2 modify  branch b1 4 modify</div><div class="line">+10 modify 1</div><div class="line">+10 modify 2</div><div class="line">+10 modify 3</div><div class="line"> branch b2 1 modify</div><div class="line">Stash this hunk [y,n,q,a,d,/,e,?]?</div></pre></td></tr></table></figure>
<p>使用<code>-k</code>或<code>--keep-index</code>参数，在保存进度后不将<code>暂存区</code>重置（默认会将<code>暂存区</code>和<code>工作区</code>强制重置，即命令：<code>--no-keep-index</code>的效果）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git bash -k | --keep-index</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">$ git status <span class="comment">#当前暂存区有一个修改的文件</span></div><div class="line">On branch master</div><div class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line"></div><div class="line">$ git stash -k <span class="comment">#储藏</span></div><div class="line">Saved working directory and index state WIP on master: ae1ffd1 merge ...</div><div class="line">HEAD is now at ae1ffd1 merge ...</div><div class="line"></div><div class="line">$ git status <span class="comment">#储藏之后，暂存区修改的文件没有被清空</span></div><div class="line">On branch master</div><div class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   hello.md</div></pre></td></tr></table></figure>
<p>使用<code>-u|--include-untracked</code>，同时储藏未跟踪文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git stash save -u|--include-untracked</div></pre></td></tr></table></figure>
<p>使用<code>-a|--all</code>来储藏所有的改动，包括未跟踪文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git stash save <span class="_">-a</span>|--all</div></pre></td></tr></table></figure>
<h2 id="查看已经保存的储藏列表"><a href="#查看已经保存的储藏列表" class="headerlink" title="查看已经保存的储藏列表"></a>查看已经保存的储藏列表</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git stash list</div><div class="line">stash@&#123;0&#125;: On master: 9 modify</div><div class="line">stash@&#123;1&#125;: WIP on master: ae1ffd1 merge ...</div></pre></td></tr></table></figure>
<h2 id="删除储藏"><a href="#删除储藏" class="headerlink" title="删除储藏"></a>删除储藏</h2><p>如果没有指定是第几个储藏时，默认会删除最近的一次储藏</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git stash drop [-q|--quiet] [&lt;stash@&#123;n&#125;&gt;]</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git stash drop stash@&#123;0&#125;</div><div class="line">Dropped stash@&#123;0&#125; (2fa94640f400006a6ba812b3c02e8b0e91472958)</div></pre></td></tr></table></figure>
<h2 id="删除所有的储藏"><a href="#删除所有的储藏" class="headerlink" title="删除所有的储藏"></a>删除所有的储藏</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git stash clear</div></pre></td></tr></table></figure>
<h2 id="查看-某次-储藏修改的内容"><a href="#查看-某次-储藏修改的内容" class="headerlink" title="查看[某次]储藏修改的内容"></a>查看[某次]储藏修改的内容</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git stash show [&lt;stash@&#123;n&#125;&gt;]</div></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ git stash show <span class="comment">#查看最后一次的储藏</span></div><div class="line"> hello.md | 2 ++</div><div class="line"> 1 file changed, 2 insertions(+)</div><div class="line"></div><div class="line">$ git stash show stash@&#123;1&#125; <span class="comment">#查看某次的储藏</span></div><div class="line"> hello.md | 1 +</div><div class="line"> 1 file changed, 1 insertion(+)</div></pre></td></tr></table></figure>
<h2 id="恢复保存的工作进度"><a href="#恢复保存的工作进度" class="headerlink" title="恢复保存的工作进度"></a>恢复保存的工作进度</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git stash &lt;pop | apply&gt; [--index] [-q|--quiet] [&lt;stash@&#123;n&#125;&gt;]</div></pre></td></tr></table></figure>
<p>如果不使用任何参数，恢复最近一次保存的工作进度</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git stash pop <span class="comment">#会从储藏列表中删除刚刚恢复的暂存</span></div><div class="line">git stash apply <span class="comment">#不会从储藏列表中删除刚刚恢复的暂存</span></div></pre></td></tr></table></figure>
<p>如果使用<code>&lt;stash@{n}&gt;</code>参数，则从该<code>&lt;stash@{n}&gt;</code>中恢复保存的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git stash pop &lt;stash@&#123;n&#125;&gt; <span class="comment">#会从储藏列表中删除该`&lt;stash@&#123;n&#125;&gt;`</span></div><div class="line">git stash apply &lt;stash@&#123;n&#125;&gt; <span class="comment">#不会从储藏列表中删除该`&lt;stash@&#123;n&#125;&gt;`</span></div></pre></td></tr></table></figure>
<p><code>--index</code>除了恢复工作区的文件外，还会恢复暂存区的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git stash pop --index</div><div class="line">git stash apply --index</div></pre></td></tr></table></figure>
<h2 id="使用储藏的内容创建新的分支"><a href="#使用储藏的内容创建新的分支" class="headerlink" title="使用储藏的内容创建新的分支"></a>使用储藏的内容创建新的分支</h2><p><code>&lt;branch-name&gt;</code>不能是已经存在的分支，并切换到创建的新分支，删除掉该储藏</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git stash branch &lt;branch-name&gt; [&lt;stash@&#123;n&#125;&gt;]</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">$ git stash branch b2</div><div class="line">Switched to a new branch <span class="string">'b2'</span></div><div class="line">&lt;stdin&gt;:9: trailing whitespace.</div><div class="line">10 modify 2</div><div class="line">warning: 1 line adds whitespace errors.</div><div class="line">On branch b2</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Changes not staged <span class="keyword">for</span> commit:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Dropped refs/stash@&#123;0&#125; (3eaa4512757a598193acb1f9f0a7f91dc6c165b1)</div></pre></td></tr></table></figure>
<h2 id="查看储藏列表的SHA-1值"><a href="#查看储藏列表的SHA-1值" class="headerlink" title="查看储藏列表的SHA-1值"></a>查看储藏列表的<code>SHA-1</code>值</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git reflog show refs/stash</div><div class="line">5afe096 refs/stash@&#123;0&#125;: On master: 9 modify</div><div class="line">a5c6080 refs/stash@&#123;1&#125;: WIP on master: ae1ffd1 merge ...</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h1><h2 id="仓库中的文件可能存在于这三种状态"><a href="#仓库中的文件可能存在于这三种状态" class="headerlink" title="仓库中的文件可能存在于这三种状态"></a>仓库中的文件可能存在于这三种状态</h2><ol>
<li><code>Untracked files</code> → 文件未被跟踪</li>
<li><code>Changes to be committed</code> → 文件已暂存，这是下次提交的内容</li>
<li><code>Changes not staged for commit</code> → 文件被修改，但并没有添加到暂存区。如果<code>commit</code>时没有带<code>-a</code>选项，此状态下的文件不会被提交。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">$ git status</div><div class="line">On branch b2</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Changes not staged <span class="keyword">for</span> commit:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Untracked files:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">        test.txt</div></pre></td></tr></table></figure>
<h2 id="提交暂存区的内容"><a href="#提交暂存区的内容" class="headerlink" title="提交暂存区的内容"></a>提交暂存区的内容</h2><p>提交状态为<code>Changes to be committed</code>的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git commit [-m &lt;message&gt;]</div></pre></td></tr></table></figure>
<h2 id="提交暂存区和工作区的内容"><a href="#提交暂存区和工作区的内容" class="headerlink" title="提交暂存区和工作区的内容"></a>提交暂存区和工作区的内容</h2><p>提交状态为<code>Changes to be committed</code>和<code>Changes not staged for commit</code>的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git commit <span class="_">-a</span> [-m &lt;message&gt;]</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">$ git status</div><div class="line">On branch b2</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Changes not staged <span class="keyword">for</span> commit:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Untracked files:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">        test.txt</div><div class="line"></div><div class="line">$ git commit <span class="_">-a</span> -m<span class="string">"commit with -a"</span></div><div class="line">[b2 48c54d7] commit with <span class="_">-a</span></div><div class="line"> 1 file changed, 3 insertions(+)</div><div class="line"></div><div class="line">$ git status</div><div class="line">On branch b2</div><div class="line">Untracked files:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">        test.txt</div></pre></td></tr></table></figure>
<h2 id="修改或者撤销最后一次提交"><a href="#修改或者撤销最后一次提交" class="headerlink" title="修改或者撤销最后一次提交"></a>修改或者撤销最后一次提交</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git commit --amend <span class="comment">#进入交互终端模式</span></div><div class="line">git commit --amend -m &lt;message&gt; <span class="comment">#修改最后一次提交的注释</span></div></pre></td></tr></table></figure>
<p>修改最后一次提交，退出编辑器之后会直接<code>commit</code>。如果要取消，则在编辑器里清空掉提交信息再退出即可。使用场景如：修改提交信息、补正刚才修改的内容（需要先<code>git add</code>）、少添加文件了（需要先<code>git add</code>），谨慎操作！！</p>
<hr>
<h1 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a>git checkout</h1><h2 id="汇总显示（工作区和暂存区）与HEAD的差异"><a href="#汇总显示（工作区和暂存区）与HEAD的差异" class="headerlink" title="汇总显示（工作区和暂存区）与HEAD的差异"></a>汇总显示（工作区和暂存区）与<code>HEAD</code>的差异</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git checkout [HEAD]</div><div class="line">git checkout HEAD</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">$ git status</div><div class="line">On branch b2</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Changes not staged <span class="keyword">for</span> commit:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   README.md</div><div class="line"></div><div class="line">Untracked files:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">        test.txt</div><div class="line"></div><div class="line"></div><div class="line">$ git checkout <span class="comment">#不会统计未追踪的文件</span></div><div class="line">M       README.md</div><div class="line">M       hello.md</div><div class="line"></div><div class="line">$ git checkout HEAD</div><div class="line">M       README.md</div><div class="line">M       hello.md</div></pre></td></tr></table></figure>
<h2 id="撤销工作区的修改"><a href="#撤销工作区的修改" class="headerlink" title="撤销工作区的修改"></a>撤销工作区的修改</h2><p>用暂存区中的内容覆盖工作区的内容，如果使用<code>.</code>，而没有指定具体的<code>file</code>，会替换工作区所有有改动的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout [--] &lt;. | file&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">$ git status</div><div class="line">On branch b2</div><div class="line">Changes to be committed:      <span class="comment">#暂存区的修改</span></div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Changes not staged <span class="keyword">for</span> commit: <span class="comment">#工作区的修改</span></div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Untracked files:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">        test.txt</div><div class="line"></div><div class="line"></div><div class="line">$ git checkout hello.md <span class="comment">#使用暂存区的内容覆盖工作区的内容</span></div><div class="line"></div><div class="line">$ git status <span class="comment">#工作区没有修改的内容</span></div><div class="line">On branch b2</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Untracked files:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">        test.txt</div></pre></td></tr></table></figure>
<h2 id="用HEAD中的内容替换暂存区和工作区的修改"><a href="#用HEAD中的内容替换暂存区和工作区的修改" class="headerlink" title="用HEAD中的内容替换暂存区和工作区的修改"></a>用<code>HEAD</code>中的内容替换暂存区和工作区的修改</h2><p>取出最近的一次提交的内容，替换暂存区和工作区的修改，如果使用<code>.</code>，而没有指定具体的<code>file</code>，会替换暂存区和工作区中所有有改动的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git checkout [--] &lt;. | file&gt;</div><div class="line">git checkout &lt;file&gt;</div><div class="line">git checkout .</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">$ git status <span class="comment">#暂存区和工作区都有修改</span></div><div class="line">On branch master</div><div class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Changes not staged <span class="keyword">for</span> commit:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Untracked files:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">        test.txt</div><div class="line"></div><div class="line"></div><div class="line">$ git checkout HEAD hello.md <span class="comment">#撤销暂存区和工作区的修改</span></div><div class="line"></div><div class="line">$ git status <span class="comment">#hello.md在暂存区和工作区没有修改</span></div><div class="line">On branch master</div><div class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</div><div class="line">Untracked files:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">        test.txt</div></pre></td></tr></table></figure>
<h2 id="使用其它分支的内容替换当前分支上暂存区和工作区的内容"><a href="#使用其它分支的内容替换当前分支上暂存区和工作区的内容" class="headerlink" title="使用其它分支的内容替换当前分支上暂存区和工作区的内容"></a>使用其它分支的内容替换当前分支上暂存区和工作区的内容</h2><p><code>HEAD</code>的指向不会变化</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout &lt;branch-name&gt; [--] &lt;file&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line">Administrator@Jerry-WIN8-TP MINGW64 /d/workspaces/<span class="built_in">test</span>/progit (master)</div><div class="line">$ git status <span class="comment">#当前分支是：master，hello.md在暂存区和工作区都有修改</span></div><div class="line">On branch master</div><div class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Changes not staged <span class="keyword">for</span> commit:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Untracked files:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">        test.txt</div><div class="line"></div><div class="line"></div><div class="line">Administrator@Jerry-WIN8-TP MINGW64 /d/workspaces/<span class="built_in">test</span>/progit (master)</div><div class="line">$ git diff b2 <span class="comment">#master分支和b2分支比较hello.md的内容</span></div><div class="line">diff --git a/hello.md b/hello.md</div><div class="line">index d866fb0..44d3964 100644</div><div class="line">--- a/hello.md</div><div class="line">+++ b/hello.md</div><div class="line">@@ -8,9 +8,8 @@</div><div class="line"> 6 modify</div><div class="line"> 7 modify by jerry</div><div class="line"> 7 modify</div><div class="line">+8 modify^M  <span class="comment">#master分支上的内容</span></div><div class="line"> branch b1 1 modify  branch b1 3 modify</div><div class="line"> branch b1 2 modify  branch b1 4 modify</div><div class="line">-10 modify 1 <span class="comment">#b2分支上的内容</span></div><div class="line">-10 modify 2</div><div class="line">-10 modify 3</div><div class="line">+master modify 11^M</div><div class="line"> branch b2 1 modify</div><div class="line"></div><div class="line">Administrator@Jerry-WIN8-TP MINGW64 /d/workspaces/<span class="built_in">test</span>/progit (master)</div><div class="line">$ git checkout b2 hello.md <span class="comment">#用b2分支上hello.md的内容替换暂存区和工作区的内容</span></div><div class="line"></div><div class="line">Administrator@Jerry-WIN8-TP MINGW64 /d/workspaces/<span class="built_in">test</span>/progit (master)</div><div class="line">$ git diff b2 <span class="comment">#master分支和b2分支没有差异</span></div><div class="line"></div><div class="line">Administrator@Jerry-WIN8-TP MINGW64 /d/workspaces/<span class="built_in">test</span>/progit (master)</div><div class="line">$ git status <span class="comment">#暂存区还是有hello.md这个文件</span></div><div class="line">On branch master</div><div class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   hello.md</div><div class="line"></div><div class="line">Untracked files:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">        test.txt</div><div class="line"></div><div class="line">Administrator@Jerry-WIN8-TP MINGW64 /d/workspaces/<span class="built_in">test</span>/progit (master)</div><div class="line">$ cat hello.md <span class="comment">#查看master分支上hello.md文件内容，发现b2分支的内容替换过来了</span></div><div class="line">6 modify</div><div class="line">1 add</div><div class="line">2 modify</div><div class="line">3 modify</div><div class="line">4 mdofiy --&gt; amend 3</div><div class="line">5 modify</div><div class="line">6 modify by jerry</div><div class="line">6 modify</div><div class="line">7 modify by jerry</div><div class="line">7 modify</div><div class="line">branch b1 1 modify  branch b1 3 modify</div><div class="line">branch b1 2 modify  branch b1 4 modify</div><div class="line">10 modify 1 <span class="comment">#这3行是b2分支上添加的内容，现在出现在master分支上了</span></div><div class="line">10 modify 2</div><div class="line">10 modify 3</div><div class="line">branch b2 1 modify</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h1><h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><p>将当前的分支重设（reset）到指定的<code>&lt;commit&gt;</code>或者<code>HEAD</code>（如果不显示指定<code>commit</code>，默认是<code>HEAD</code>，即最新的一次提交），并且根据<code>选项</code>有可能更新<code>暂存区</code>和<code>工作区</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git reset [--mixed | --soft | --hard | --merge | --keep] [-q] [&lt;commit&gt;]</div></pre></td></tr></table></figure>
<p><code>--soft</code>：<code>暂存区</code>和<code>工作区</code>中的内容不作任何改变，仅仅把<code>HEAD</code>指向<code>&lt;commit&gt;</code>。这个模式的效果是，执行完毕后，自从<code>&lt;commit&gt;</code>以来的所有改变都会显示为<code>Changes to be committed</code>（<code>git status</code>） 。<b><font color="red">不会丢失任何改动</font></b></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git reset --soft &lt;commit&gt;</div><div class="line"></div><div class="line">git reset --soft HEAD^ <span class="comment">#HEAD^代表版本库中的最近一次提交的父提交，即重置到倒数第二次提交</span></div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line">$ git hist <span class="comment">#现在有3个提交</span></div><div class="line">* adba38b v3 commit</div><div class="line">* c7ded78 v2 commit</div><div class="line">* 45496b8 v1 commit</div><div class="line"></div><div class="line">$ cat readme.md <span class="comment">#文件的内容如下</span></div><div class="line">v1</div><div class="line">v2</div><div class="line">v3</div><div class="line">v4</div><div class="line"></div><div class="line">$ git status <span class="comment">#工作区有修改的内容，暂存区没有修改的内容</span></div><div class="line">On branch master</div><div class="line">Changes not staged <span class="keyword">for</span> commit:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   readme.md</div><div class="line"></div><div class="line">$ git diff <span class="comment">#比较工作区和暂存区</span></div><div class="line">diff --git a/readme.md b/readme.md</div><div class="line">index 4b1d4d4..ed7ce12 100644</div><div class="line">--- a/readme.md</div><div class="line">+++ b/readme.md</div><div class="line">@@ -1,3 +1,4 @@</div><div class="line"> v1</div><div class="line"> v2</div><div class="line"> v3</div><div class="line">+v4 <span class="comment">#工作区修改的内容</span></div><div class="line"></div><div class="line">$ git reset --soft c7ded78 <span class="comment">#将分支重设到第二次提交</span></div><div class="line"></div><div class="line">$ git status <span class="comment">#查看状态，暂存区显示有待提交的内容</span></div><div class="line">On branch master</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   readme.md</div><div class="line"></div><div class="line">Changes not staged <span class="keyword">for</span> commit:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   readme.md</div><div class="line"></div><div class="line">$ git diff <span class="comment">#比较工作区和暂存区，工作区的内容还是之前的</span></div><div class="line">diff --git a/readme.md b/readme.md</div><div class="line">index 4b1d4d4..ed7ce12 100644</div><div class="line">--- a/readme.md</div><div class="line">+++ b/readme.md</div><div class="line">@@ -1,3 +1,4 @@</div><div class="line"> v1</div><div class="line"> v2</div><div class="line"> v3</div><div class="line">+v4</div><div class="line"></div><div class="line">$ git diff --cached HEAD <span class="comment">#比较暂存区和HEAD的差异</span></div><div class="line">diff --git a/readme.md b/readme.md</div><div class="line">index 2139d8b..4b1d4d4 100644</div><div class="line">--- a/readme.md</div><div class="line">+++ b/readme.md</div><div class="line">@@ -1,2 +1,3 @@</div><div class="line"> v1</div><div class="line"> v2</div><div class="line">+v3 <span class="comment">#这一行就是第三次提交的内容</span></div><div class="line"></div><div class="line">$ git hist <span class="comment">#查看提交日志</span></div><div class="line">* c7ded78 v2 commit</div><div class="line">* 45496b8 v1 commit</div><div class="line"></div><div class="line">$ cat readme.md</div><div class="line">v1</div><div class="line">v2</div><div class="line">v3</div><div class="line">v4</div></pre></td></tr></table></figure>
<p><code>--hard</code>：重设<code>暂存区</code>和<code>工作区</code>，自从<code>&lt;commit&gt;</code>以来在<code>工作区</code>中的任何改变都被丢弃，并把<code>HEAD</code>指向<code>&lt;commit&gt;</code>。<b><font color="red">会丢失改动</font></b></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git reset --hard &lt;commit&gt;</div><div class="line"></div><div class="line">git reset --hard HEAD^ <span class="comment">#HEAD^代表版本库中的最近一次提交的父提交，即丢弃掉最近的一次提交</span></div><div class="line"></div><div class="line">git reset --hard origin/master <span class="comment">#丢弃在本地的所有改动与提交，用远程仓库的提交覆盖</span></div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">$ git hist <span class="comment">#现在有3个提交</span></div><div class="line">* adba38b v3 commit</div><div class="line">* c7ded78 v2 commit</div><div class="line">* 45496b8 v1 commit</div><div class="line"></div><div class="line">$ cat readme.md <span class="comment">#文件的内容如下</span></div><div class="line">v1</div><div class="line">v2</div><div class="line">v3</div><div class="line">v4</div><div class="line">v5</div><div class="line"></div><div class="line">$ git diff <span class="comment">#比较工作区和暂存区</span></div><div class="line">diff --git a/readme.md b/readme.md</div><div class="line">index ed7ce12..4d73d61 100644</div><div class="line">--- a/readme.md</div><div class="line">+++ b/readme.md</div><div class="line">@@ -2,3 +2,4 @@ v1</div><div class="line"> v2</div><div class="line"> v3</div><div class="line"> v4</div><div class="line">+v5 <span class="comment">#工作区修改的内容</span></div><div class="line"></div><div class="line">$ git diff --cached HEAD <span class="comment">#比较暂存区和HEAD的差异</span></div><div class="line">diff --git a/readme.md b/readme.md</div><div class="line">index 4b1d4d4..ed7ce12 100644</div><div class="line">--- a/readme.md</div><div class="line">+++ b/readme.md</div><div class="line">@@ -1,3 +1,4 @@</div><div class="line"> v1</div><div class="line"> v2</div><div class="line"> v3</div><div class="line">+v4 <span class="comment">#暂存区修改的内容</span></div><div class="line"></div><div class="line">$ git status <span class="comment">#查看状态，工作区和暂存区显示有修改的内容</span></div><div class="line">On branch master</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   readme.md</div><div class="line"></div><div class="line">Changes not staged <span class="keyword">for</span> commit:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   readme.md</div><div class="line"></div><div class="line">$ git reset --hard c7ded78 <span class="comment">#将分支重设到第二次提交</span></div><div class="line">HEAD is now at c7ded78 v2 commit</div><div class="line"></div><div class="line">$ git status <span class="comment">#查看状态，工作区和暂存区显示没有修改的内容</span></div><div class="line">On branch master</div><div class="line">nothing to commit, working directory clean</div><div class="line"></div><div class="line">$ git hist <span class="comment">#查看提交日志</span></div><div class="line">* c7ded78 v2 commit</div><div class="line">* 45496b8 v1 commit</div><div class="line"></div><div class="line">$ cat readme.md <span class="comment">#查看文件的内容，重设前的工作区和暂存区修改的内容已经丢失掉了</span></div><div class="line">v1</div><div class="line">v2</div></pre></td></tr></table></figure>
<p><code>--mixed</code>：仅重设<code>暂存区</code>，但是不重设<code>工作区</code>。这个模式是默认模式，即当不显示告知<code>git reset</code>模式时，会使用<code>--mixed</code>模式。这个模式的效果是，<code>工作区</code>中文件的修改都会被保留，不会丢弃，但是也不会被标记成<code>Changes to be committed</code>。<b><font color="red">不会丢失任何改动</font></b></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git reset &lt;commit&gt;</div><div class="line">git reset --mixed &lt;commit&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line">$ git hist <span class="comment">#现在有3个提交</span></div><div class="line">* adba38b v3 commit</div><div class="line">* c7ded78 v2 commit</div><div class="line">* 45496b8 v1 commit</div><div class="line"></div><div class="line">$ cat readme.md <span class="comment">#文件的内容如下</span></div><div class="line">v1</div><div class="line">v2</div><div class="line">v3</div><div class="line">v4</div><div class="line">v5</div><div class="line"></div><div class="line">$ git diff <span class="comment">#比较工作区和暂存区</span></div><div class="line">diff --git a/readme.md b/readme.md</div><div class="line">index ed7ce12..4d73d61 100644</div><div class="line">--- a/readme.md</div><div class="line">+++ b/readme.md</div><div class="line">@@ -2,3 +2,4 @@ v1</div><div class="line"> v2</div><div class="line"> v3</div><div class="line"> v4</div><div class="line">+v5 <span class="comment">#工作区修改的内容</span></div><div class="line"></div><div class="line">$ git diff --cached HEAD <span class="comment">#比较暂存区和HEAD的差异</span></div><div class="line">diff --git a/readme.md b/readme.md</div><div class="line">index 4b1d4d4..ed7ce12 100644</div><div class="line">--- a/readme.md</div><div class="line">+++ b/readme.md</div><div class="line">@@ -1,3 +1,4 @@</div><div class="line"> v1</div><div class="line"> v2</div><div class="line"> v3</div><div class="line">+v4 <span class="comment">#暂存区修改的内容</span></div><div class="line"></div><div class="line">$ git status <span class="comment">#查看状态，工作区和暂存区显示有修改的内容</span></div><div class="line">On branch master</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   readme.md</div><div class="line"></div><div class="line">Changes not staged <span class="keyword">for</span> commit:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   readme.md</div><div class="line"></div><div class="line">$ git reset --mixed c7ded78 <span class="comment">#将分支重设到第二次提交</span></div><div class="line">Unstaged changes after reset:</div><div class="line">M       readme.md</div><div class="line"></div><div class="line">$ git status <span class="comment">#查看状态，暂存区没有待提交的内容</span></div><div class="line">On branch master</div><div class="line">Changes not staged <span class="keyword">for</span> commit:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   readme.md</div><div class="line"></div><div class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</div><div class="line"></div><div class="line">$ git diff <span class="comment">#比较工作区和暂存区</span></div><div class="line">diff --git a/readme.md b/readme.md</div><div class="line">index 2139d8b..4d73d61 100644</div><div class="line">--- a/readme.md</div><div class="line">+++ b/readme.md</div><div class="line">@@ -1,2 +1,5 @@</div><div class="line"> v1</div><div class="line"> v2</div><div class="line">+v3 <span class="comment">#重设前HEAD的内容，出现在工作区了</span></div><div class="line">+v4 <span class="comment">#重设前暂存区的内容，出现在工作区了</span></div><div class="line">+v5 <span class="comment">#重设前工作区的内容</span></div><div class="line"></div><div class="line">$ git hist <span class="comment">#查看提交日志</span></div><div class="line">* c7ded78 v2 commit</div><div class="line">* 45496b8 v1 commit</div><div class="line"></div><div class="line">$ cat readme.md <span class="comment">#查看文件的内容，重设前的工作区和暂存区修改的内容没有丢失掉了</span></div><div class="line">v1</div><div class="line">v2</div><div class="line">v3</div><div class="line">v4</div><div class="line">v5</div></pre></td></tr></table></figure>
<h2 id="重置暂存区"><a href="#重置暂存区" class="headerlink" title="重置暂存区"></a>重置暂存区</h2><p>将暂存区添加的内容，回退到工作区，改动不会丢失。如果指定了文件<code>&lt;file&gt;</code>，则只处理此文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">git reset HEAD</div><div class="line">git reset --</div><div class="line">git reset</div><div class="line"></div><div class="line">git reset HEAD &lt;file&gt;</div><div class="line">git reset -- &lt;file&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">$ git hist <span class="comment">#现在有3个提交</span></div><div class="line">* adba38b v3 commit</div><div class="line">* c7ded78 v2 commit</div><div class="line">* 45496b8 v1 commit</div><div class="line"></div><div class="line">$ git status <span class="comment">#查看状态，暂存区显示有修改的内容</span></div><div class="line">On branch master</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        modified:   readme.md</div><div class="line">        new file:   test.md</div><div class="line"></div><div class="line">$ git diff</div><div class="line"></div><div class="line">$ git diff --cached <span class="comment">#比较工作区和暂存区</span></div><div class="line">diff --git a/readme.md b/readme.md</div><div class="line">index 4b1d4d4..0d6160d 100644</div><div class="line">--- a/readme.md</div><div class="line">+++ b/readme.md</div><div class="line">@@ -1,3 +1,4 @@</div><div class="line"> v1</div><div class="line"> v2</div><div class="line"> v3</div><div class="line">+v4</div><div class="line">diff --git a/test.md b/test.md</div><div class="line">new file mode 100644</div><div class="line">index 0000000..e69de29</div><div class="line"></div><div class="line">$ git reset HEAD <span class="comment">#重置暂存区</span></div><div class="line">Unstaged changes after reset:</div><div class="line">M       readme.md</div><div class="line"></div><div class="line">$ git status <span class="comment">#查看状态，刚才在暂存区待提交的内容已经退回到工作区</span></div><div class="line">On branch master</div><div class="line">Changes not staged <span class="keyword">for</span> commit:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</div><div class="line"></div><div class="line">        modified:   readme.md</div><div class="line"></div><div class="line">Untracked files:</div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">        test.md</div><div class="line"></div><div class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</div><div class="line"></div><div class="line">$ git diff</div><div class="line">diff --git a/readme.md b/readme.md</div><div class="line">index 4b1d4d4..0d6160d 100644</div><div class="line">--- a/readme.md</div><div class="line">+++ b/readme.md</div><div class="line">@@ -1,3 +1,4 @@</div><div class="line"> v1</div><div class="line"> v2</div><div class="line"> v3</div><div class="line">+v4</div></pre></td></tr></table></figure>
<h2 id="实战：两个提交压缩为一个"><a href="#实战：两个提交压缩为一个" class="headerlink" title="实战：两个提交压缩为一个"></a>实战：两个提交压缩为一个</h2><p>使用<code>--soft</code>参数调用重置命令，回到最近两次提交之前</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git reset --soft HEAD^^</div></pre></td></tr></table></figure>
<p>查看版本状态和最新日志，如果需要修改就进行修改</p>
<p>执行提交操作，即完成最新两个提交压缩为一个</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git commit -m<span class="string">"Message"</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="git-rebase"><a href="#git-rebase" class="headerlink" title="git rebase"></a>git rebase</h1><h2 id="交互式变基操作"><a href="#交互式变基操作" class="headerlink" title="交互式变基操作"></a>交互式变基操作</h2><p><code>&lt;since&gt;</code>和<code>&lt;till&gt;</code>代表历史提交的<code>SHA-1</code>值，变基的范围是从<code>&lt;since&gt;</code>（不包括<code>&lt;since&gt;</code>）的下一个提交到<code>&lt;till&gt;</code>，如果<code>&lt;till&gt;</code>没有给出，则变基的范围到当前<code>HEAD</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rebase -i &lt;since&gt; [&lt;till&gt;]</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">$ git hist <span class="comment">#现在有5个提交</span></div><div class="line">* 1c1e018 v5 commit</div><div class="line">* 45d9dfb v4 commit</div><div class="line">* adba38b v3 commit</div><div class="line">* c7ded78 v2 commit</div><div class="line">* 45496b8 v1 commit</div><div class="line"></div><div class="line">$ git rebase -i c7ded78 45d9dfb <span class="comment">#变基范围为第三个提交到第四个提交</span></div><div class="line"><span class="comment">#稍等一会儿，就会弹出交互式界面，如果范围比较长需要等待的时间会久一些，如下：</span></div><div class="line"></div><div class="line">pick adba38b v3 commit</div><div class="line">pick 45d9dfb v4 commit</div><div class="line"></div><div class="line"><span class="comment"># Rebase c7ded78..45d9dfb onto c7ded78 (2 command(s)) #能够操作的提交只有2个</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Commands:</span></div><div class="line"><span class="comment"># p, pick = use commit</span></div><div class="line"><span class="comment"># r, reword = use commit, but edit the commit message</span></div><div class="line"><span class="comment"># e, edit = use commit, but stop for amending</span></div><div class="line"><span class="comment"># s, squash = use commit, but meld into previous commit</span></div><div class="line"><span class="comment"># f, fixup = like "squash", but discard this commit's log message</span></div><div class="line"><span class="comment"># x, exec = run command (the rest of the line) using shell</span></div><div class="line"><span class="comment"># d, drop = remove commit</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># These lines can be re-ordered; they are executed from top to bottom.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># If you remove a line here THAT COMMIT WILL BE LOST.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># However, if you remove everything, the rebase will be aborted.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Note that empty commits are commented out</span></div></pre></td></tr></table></figure>
<ol>
<li>开头的几行由上到下依次对应历史的提交，如果删除掉这些提交保存退出交互式模式，则不执行变基动作</li>
<li><code>pick</code>，或简写<code>p</code>，默认的动作，即应用此提交</li>
<li><code>reword</code>，或简写<code>r</code>。在变基时会应用此提交，但是在提交的时候允许用户修改提交说明</li>
<li><code>edit</code>，或简写<code>e</code>。在变基时会应用此提交，但是在应用后你可以进行内容编辑，需要使用<code>git commit --amend</code>执行提交，以便对提交进行修补。当用户执行<code>git commit --amend</code>完成提交后，还需要执行<code>git rebase --continue</code>继续变基操作。用户在变基暂停状态下可以执行多次提交，从而实现把一个提交分解为多个提交</li>
<li><code>squash</code>，简写<code>s</code>。该提交会与前面的提交压缩为一个</li>
<li><code>fixup</code>，简写<code>f</code>。类似动作<code>squash</code>，但是提交的提交说明被丢弃</li>
<li>可以通过修改变基任务文件中各个提交的先后顺序，进而改变最终变基后提交的先后顺序</li>
<li>可以通过改变变基任务文件，删除包含相应提交的行，这样该提交就不会被应用，进而在变基后的提交中被删除</li>
</ol>
<p>在变基遇到冲突而暂停的情况下，先完成冲突解决（添加到暂存区，不提交），然后在恢复变基操作的时候使用该命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rebase --continue</div></pre></td></tr></table></figure>
<p>在变基遇到冲突而暂停的情况下，跳过当前提交的时候使用，谨慎用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rebase –abort</div></pre></td></tr></table></figure>
<p>在变基遇到冲突而暂停的情况下，终止变基操作，回到之前的分支时候使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rebase –skip</div></pre></td></tr></table></figure>
<h2 id="将其它分支上的修改应用到当前分支"><a href="#将其它分支上的修改应用到当前分支" class="headerlink" title="将其它分支上的修改应用到当前分支"></a>将其它分支上的修改应用到当前分支</h2><p>将远程仓库的更新，合并到当前分支上产生一个新的提交，如果工作区或者暂存区有未提交的更改，变基动作不会执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git fetch origin master</div><div class="line">git rebase origin/master</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h1><h2 id="显示所有分支信息"><a href="#显示所有分支信息" class="headerlink" title="显示所有分支信息"></a>显示所有分支信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git branch</div><div class="line">git branch -v</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ git branch <span class="comment">#显示所有分支名称</span></div><div class="line">  b1</div><div class="line">* master</div><div class="line"></div><div class="line">$ git branch -v <span class="comment">#显示所有分支名称，同时显示最后的提交注释，*：代表当前分支</span></div><div class="line">  b1     45d9dfb v4 commit</div><div class="line">* master 1c1e018 v5 commit</div></pre></td></tr></table></figure>
<h2 id="创建新分支"><a href="#创建新分支" class="headerlink" title="创建新分支"></a>创建新分支</h2><p>创建新分支之后，不会自动切换到新分支上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git branch &lt;new-branch-name&gt;</div></pre></td></tr></table></figure>
<p>基于<code>&lt;commit&gt;</code>创建新分支，不会自动切换到新分支上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git branch &lt;new-branch-name&gt; &lt;commit&gt;</div></pre></td></tr></table></figure>
<p>使用<code>git checkout</code>创建新分支，并自动切换到这个分支上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout -b &lt;new-branch-name&gt;</div></pre></td></tr></table></figure>
<p>使用<code>git checkout</code>基于标签创建新分支，并自动切换到这个分支上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout -b &lt;new-branch-name&gt; &lt;tag-name&gt;</div></pre></td></tr></table></figure>
<p>使用<code>git checkout</code>基于标签创建新分支，没有指定<code>&lt;new-branch-name&gt;</code>，<code>HEAD</code>会进入到游离指针状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout -b &lt;tag-name&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ git checkout v5</div><div class="line">Note: checking out <span class="string">'v5'</span>.</div><div class="line"></div><div class="line">You are <span class="keyword">in</span> <span class="string">'detached HEAD'</span> state. You can look around, make experimental</div><div class="line">changes and commit them, and you can discard any commits you make <span class="keyword">in</span> this</div><div class="line">state without impacting any branches by performing another checkout.</div><div class="line"></div><div class="line">If you want to create a new branch to retain commits you create, you may</div><div class="line"><span class="keyword">do</span> so (now or later) by using -b with the checkout <span class="built_in">command</span> again. Example:</div><div class="line"></div><div class="line">  git checkout -b &lt;new-branch-name&gt;</div><div class="line"></div><div class="line">HEAD is now at 1c1e018... v5 commit</div></pre></td></tr></table></figure>
<p>退出游离指针状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git checkout &lt;branch-name&gt; <span class="comment">#切换到其它分支</span></div><div class="line">git checkout -b &lt;new-branch-name&gt; <span class="comment">#将游离指针状态，切换到创建的新分支上</span></div></pre></td></tr></table></figure>
<p>创建新分支来跟踪远程分支，并自动切换到这个分支上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout -b &lt;new-branch-name&gt; &lt;remote-name&gt;/&lt;remote-branch-name&gt;</div></pre></td></tr></table></figure>
<h2 id="重命名分支"><a href="#重命名分支" class="headerlink" title="重命名分支"></a>重命名分支</h2><p>如果<code>&lt;new-branch-name&gt;</code>已经存在，重命名动作停止</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git branch -m &lt;old-branch-name&gt; &lt;new-branch-name&gt;</div></pre></td></tr></table></figure>
<p>如果<code>&lt;new-branch-name&gt;</code>已经存在，重命名动作继续，请谨慎操作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git branch -M &lt;old-branch-name&gt; &lt;new-branch-name&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ git branch -v</div><div class="line">  b1     1c1e018 v5 commit</div><div class="line">  b2     1c1e018 v5 commit</div><div class="line">* master 1c1e018 v5 commit</div><div class="line"></div><div class="line">$ git branch -m b2 b1</div><div class="line">fatal: A branch named <span class="string">'b1'</span> already exists.</div><div class="line"></div><div class="line">$ git branch -M b2 b1</div><div class="line"></div><div class="line">$ git branch -v</div><div class="line">  b1     1c1e018 v5 commit</div><div class="line">* master 1c1e018 v5 commit</div></pre></td></tr></table></figure>
<h2 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h2><p>如果分支上存在未被合并的提交，删除动作停止</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git branch <span class="_">-d</span> &lt;branch-name&gt;</div></pre></td></tr></table></figure>
<p>如果分支上存在未被合并的提交，删除动作继续，请谨慎操作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git branch -D &lt;branch-name&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ git branch -v</div><div class="line">  b1     2e6423e v6 commit on branch b1</div><div class="line">* master 1c1e018 v5 commit</div><div class="line"></div><div class="line">$ git branch <span class="_">-d</span> b1 <span class="comment">#提示b1分支上存在没有被合并的提交</span></div><div class="line">error: The branch <span class="string">'b1'</span> is not fully merged.</div><div class="line">If you are sure you want to delete it, run <span class="string">'git branch -D b1'</span>.</div><div class="line"></div><div class="line">$ git branch -D b1</div><div class="line">Deleted branch b1 (was 2e6423e).</div><div class="line"></div><div class="line">$ git branch -v</div><div class="line">* master 1c1e018 v5 commit</div></pre></td></tr></table></figure>
<h2 id="查看已经合并到当前分支的分支"><a href="#查看已经合并到当前分支的分支" class="headerlink" title="查看已经合并到当前分支的分支"></a>查看已经合并到当前分支的分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git branch --merged</div></pre></td></tr></table></figure>
<h2 id="查看没有合并到当前分支的分支"><a href="#查看没有合并到当前分支的分支" class="headerlink" title="查看没有合并到当前分支的分支"></a>查看没有合并到当前分支的分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git branch --no-merged</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ git branch -v</div><div class="line">  b1     1c1e018 v5 commit</div><div class="line">  b2     82fa977 v6 commit</div><div class="line">* master 1c1e018 v5 commit</div><div class="line"></div><div class="line">$ git branch --merged</div><div class="line">  b1</div><div class="line">* master</div><div class="line"></div><div class="line">$ git branch --no-merged</div><div class="line">  b2</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h1><p><br><b>有未提交修改情况下，不要执行merge！遵守这条警告，防患于未然</b></p>
<h2 id="基本操作-1"><a href="#基本操作-1" class="headerlink" title="基本操作"></a>基本操作</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git merge [&lt;options&gt;] [&lt;commit&gt;...]</div></pre></td></tr></table></figure>
<ol>
<li>默认合并成功后会自动提交，使用<code>--no-commit</code>选项，则合并后的内容会放入暂存区，需要手动提交</li>
<li><code>&lt;commit&gt;</code>可以是提交的<code>SHA-1</code>值、分支、标签等</li>
<li><code>&lt;commit&gt;</code>如果是多个提交，合并成功后，当前<code>HEAD</code>是第一个<code>&lt;commit&gt;</code>的父提交，第一个<code>&lt;commit&gt;</code>是第二个<code>&lt;commit&gt;</code>的父提交，依次类推</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">$ git hist b2 <span class="comment">#b2分支上有7个提交，领先master分支2个提交</span></div><div class="line">* ece4a12 v7 commit</div><div class="line">* 82fa977 v6 commit</div><div class="line">* 1c1e018 v5 commit</div><div class="line">* 45d9dfb v4 commit</div><div class="line">* adba38b v3 commit</div><div class="line">* c7ded78 v2 commit</div><div class="line">* 45496b8 v1 commit</div><div class="line"></div><div class="line">$ git hist master <span class="comment">#master分支上有5个提交</span></div><div class="line">* 1c1e018 v5 commit</div><div class="line">* 45d9dfb v4 commit</div><div class="line">* adba38b v3 commit</div><div class="line">* c7ded78 v2 commit</div><div class="line">* 45496b8 v1 commit</div><div class="line"></div><div class="line">$ git merge 82fa977 ece4a12 <span class="comment">#合并b2分支上的2个提交</span></div><div class="line">Updating 1c1e018..ece4a12</div><div class="line">Fast-forward</div><div class="line"> readme.md | 2 ++</div><div class="line"> 1 file changed, 2 insertions(+)</div><div class="line"></div><div class="line">$ git hist master</div><div class="line">* ece4a12 v7 commit</div><div class="line">* 82fa977 v6 commit</div><div class="line">* 1c1e018 v5 commit</div><div class="line">* 45d9dfb v4 commit</div><div class="line">* adba38b v3 commit</div><div class="line">* c7ded78 v2 commit</div><div class="line">* 45496b8 v1 commit</div></pre></td></tr></table></figure>
<h2 id="不要Fast-Foward合并，会生成merge提交信息"><a href="#不要Fast-Foward合并，会生成merge提交信息" class="headerlink" title="不要Fast-Foward合并，会生成merge提交信息"></a>不要<code>Fast-Foward</code>合并，会生成<code>merge</code>提交信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git merge [&lt;commit&gt;...] --no-ff</div></pre></td></tr></table></figure>
<p>不要<code>Fast-Foward</code>合并，手动生成<code>merge</code>提交信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git merge [&lt;commit&gt;...] --no-ff -m<span class="string">"&lt;Message&gt;"</span></div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">$ git merge 82fa977 --no-ff</div><div class="line">Merge made by the <span class="string">'recursive'</span> strategy.</div><div class="line"> readme.md | 1 +</div><div class="line"> 1 file changed, 1 insertion(+)</div><div class="line"></div><div class="line">$ git hist</div><div class="line">*   2cc5c4c Merge commit <span class="string">'82fa977'</span></div><div class="line">|\</div><div class="line">| * 82fa977 v6 commit</div><div class="line">|/</div><div class="line">* 1c1e018 v5 commit</div><div class="line">* 45d9dfb v4 commit</div><div class="line">* adba38b v3 commit</div><div class="line">* c7ded78 v2 commit</div><div class="line">* 45496b8 v1 commit</div></pre></td></tr></table></figure>
<h2 id="将分支合并到当前分支"><a href="#将分支合并到当前分支" class="headerlink" title="将分支合并到当前分支"></a>将分支合并到当前分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git merge &lt;branch&gt;</div></pre></td></tr></table></figure>
<h2 id="终止合并操作"><a href="#终止合并操作" class="headerlink" title="终止合并操作"></a>终止合并操作</h2><p>冲突时执行中止<code>merge</code>操作，<code>merge manual</code>中说，这条命令会尽力恢复到<code>Merge</code>之前的状态（可能失败！）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git merge --abort</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h1><h2 id="创建轻量级标签"><a href="#创建轻量级标签" class="headerlink" title="创建轻量级标签"></a>创建轻量级标签</h2><p>轻量级标签就像是个不会变化的分支，实际上它就是个指向特定提交对象的引用。如果只是临时性加注标签，或者不需要旁注额外信息，用轻量级标签也没问题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git tag &lt;new-tag-name&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git tag v1.0.0 <span class="comment">#创建一个标签</span></div></pre></td></tr></table></figure>
<h2 id="创建含附注标签"><a href="#创建含附注标签" class="headerlink" title="创建含附注标签"></a>创建含附注标签</h2><p>含附注标签，实际上是存储在仓库中的一个独立对象，它有自身的校验和信息，包含着标签的名字，电子邮件地址和日期，以及标签说明，标签本身也允许使用<code>GNU Privacy Guard (GPG)</code>来签署或验证。一般我们都建议使用含附注型的标签，以便保留相关信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git tag <span class="_">-a</span> &lt;new-tag-name&gt; -m <span class="string">"&lt;Message&gt;"</span></div></pre></td></tr></table></figure>
<p>如果有自己的<code>GPG</code>私钥，还可以用<code>GPG</code>来签署标签，只需要把之前的<code>-a</code>改为<code>-s</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git tag <span class="_">-s</span> &lt;new-tag-name&gt; -m <span class="string">"&lt;Message&gt;"</span></div></pre></td></tr></table></figure>
<h2 id="GPG签署工作"><a href="#GPG签署工作" class="headerlink" title="GPG签署工作"></a><code>GPG</code>签署工作</h2><p>首先，在开始签名之前你需要先配置<code>GPG</code>并安装个人密钥。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ gpg --list-keys</div><div class="line">/Users/schacon/.gnupg/pubring.gpg</div><div class="line">---------------------------------</div><div class="line">pub   2048R/0A46826A 2014-06-04</div><div class="line">uid                  Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;</div><div class="line">sub   2048R/874529A9 2014-06-04</div></pre></td></tr></table></figure>
<p>如果你还没有安装一个密钥，可以使用<code>gpg --gen-key</code>生成一个。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpg --gen-key</div></pre></td></tr></table></figure>
<p>一旦你有一个可以签署的私钥，可以通过设置<code>Git</code>的<code>user.signingkey</code>选项来签署。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git config --global user.signingkey 0A46826A</div></pre></td></tr></table></figure>
<p>如果已经设置好一个<code>GPG</code>私钥，可以使用它来签署新的标签。所有需要做的只是使用<code>-s</code>代替<code>-a</code>即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git tag <span class="_">-s</span> v1.5 -m <span class="string">'my signed 1.5 tag'</span></div></pre></td></tr></table></figure>
<p>如果在那个标签上运行<code>git show</code>，会看到你的<code>GPG</code>签名附属在后面：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">$ git show v1.5</div><div class="line">tag v1.5</div><div class="line">Tagger: Ben Straub &lt;ben@straub.cc&gt;</div><div class="line">Date:   Sat May 3 20:29:41 2014 -0700</div><div class="line"></div><div class="line">my signed 1.5 tag</div><div class="line">-----BEGIN PGP SIGNATURE-----</div><div class="line">Version: GnuPG v1</div><div class="line"></div><div class="line">iQEcBAABAgAGBQJTZbQlAAoJEF0+sviABDDrZbQH/09PfE51KPVPlanr6q1v4/Ut</div><div class="line">LQxfojUWiLQdg2ESJItkcuweYg+kc3HCyFejeDIBw9dpXt00rY26p05qrpnG+85b</div><div class="line">hM1/PswpPLuBSr+oCIDj5GMC2r2iEKsfv2fJbNW8iWAXVLoWZRF8B0MfqX/YTMbm</div><div class="line">ecorc4iXzQu7tupRihslbNkfvfciMnSDeSvzCpWAHl7h8Wj6hhqePmLm9lAYqnKp</div><div class="line">8S5B/1SSQuEAjRZgI4IexpZoeKGVDptPHxLLS38fozsyi0QyDyzEgJxcJQVMXxVi</div><div class="line">RUysgqjcpT8+iQM1PblGfHR4XAhuOqN5Fx06PSaFZhqvWFezJ28/CLyX5q+oIVk=</div><div class="line">=EFTF</div><div class="line">-----END PGP SIGNATURE-----</div><div class="line"></div><div class="line">commit ca82a6dff817ec66f44342007202690a93763949</div><div class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</div><div class="line">Date:   Mon Mar 17 21:52:11 2008 -0700</div><div class="line"></div><div class="line">    changed the version number</div></pre></td></tr></table></figure>
<p>要验证一个签署的标签，可以运行<code>git tag -v [tag-name]</code>。这个命令使用<code>GPG</code>来验证签名。为了验证能正常工作，签署者的公钥需要在你的钥匙链中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ git tag -v v1.4.2.1</div><div class="line">object 883653babd8ee7ea23e6a5c392bb739348b1eb61</div><div class="line"><span class="built_in">type</span> commit</div><div class="line">tag v1.4.2.1</div><div class="line">tagger Junio C Hamano &lt;junkio@cox.net&gt; 1158138501 -0700</div><div class="line"></div><div class="line">GIT 1.4.2.1</div><div class="line"></div><div class="line">Minor fixes since 1.4.2, including git-mv and git-http with alternates.</div><div class="line">gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A</div><div class="line">gpg: Good signature from <span class="string">"Junio C Hamano &lt;junkio@cox.net&gt;"</span></div><div class="line">gpg:                 aka <span class="string">"[jpeg image of size 1513]"</span></div><div class="line">Primary key fingerprint: 3565 2A26 2040 E066 C9A7  4A7D C0C6 D9A4 F311 9B9A</div></pre></td></tr></table></figure>
<p>如果没有签署者的公钥，那么你将会得到类似下面的东西：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A</div><div class="line">gpg: Can<span class="string">'t check signature: public key not found</span></div><div class="line">error: could not verify the tag 'v1.4.2.1<span class="string">'</span></div></pre></td></tr></table></figure>
<p>在最新版本的<code>Git</code>中（<code>v1.7.9</code>及以上），也可以签署个人提交。 如果相对于标签而言你对直接签署到提交更感兴趣的话，所有要做的只是增加一个<code>-S</code>到<code>git commit</code>命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ git commit <span class="_">-a</span> -S -m <span class="string">'signed commit'</span></div><div class="line"></div><div class="line">You need a passphrase to unlock the secret key <span class="keyword">for</span></div><div class="line">user: <span class="string">"Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;"</span></div><div class="line">2048-bit RSA key, ID 0A46826A, created 2014-06-04</div><div class="line"></div><div class="line">[master 5c3386c] signed commit</div><div class="line"> 4 files changed, 4 insertions(+), 24 deletions(-)</div><div class="line"> rewrite Rakefile (100%)</div><div class="line"> create mode 100644 lib/git.rb</div></pre></td></tr></table></figure>
<p><code>git log</code>也有一个<code>--show-signature</code>选项来查看及验证这些签名。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">log</span> --show-signature -1</div><div class="line">commit 5c3386cf54bba0a33a32da706aa52bc0155503c2</div><div class="line">gpg: Signature made Wed Jun  4 19:49:17 2014 PDT using RSA key ID 0A46826A</div><div class="line">gpg: Good signature from <span class="string">"Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;"</span></div><div class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</div><div class="line">Date:   Wed Jun 4 19:49:17 2014 -0700</div><div class="line"></div><div class="line">    signed commit</div></pre></td></tr></table></figure>
<h2 id="查看所有的标签"><a href="#查看所有的标签" class="headerlink" title="查看所有的标签"></a>查看所有的标签</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git tag</div><div class="line">git tag <span class="_">-l</span></div><div class="line">git tag --list</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ git tag</div><div class="line">v1.0.0</div><div class="line">v2.0.0</div><div class="line"></div><div class="line">$ git tag <span class="_">-l</span></div><div class="line">v1.0.0</div><div class="line">v2.0.0</div><div class="line"></div><div class="line">$ git tag --list</div><div class="line">v1.0.0</div><div class="line">v2.0.0</div></pre></td></tr></table></figure>
<h2 id="标签匹配查询"><a href="#标签匹配查询" class="headerlink" title="标签匹配查询"></a>标签匹配查询</h2><p>使用<code>*</code>支持模糊匹配</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git tag <span class="_">-l</span> | --list <span class="string">"tag-name*"</span></div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git tag <span class="_">-l</span> <span class="string">"*1*"</span></div><div class="line">v1.0.0</div></pre></td></tr></table></figure>
<h2 id="查看标签的信息"><a href="#查看标签的信息" class="headerlink" title="查看标签的信息"></a>查看标签的信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git tag show &lt;tag-name&gt;</div></pre></td></tr></table></figure>
<h2 id="删除标签"><a href="#删除标签" class="headerlink" title="删除标签"></a>删除标签</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git tag <span class="_">-d</span> &lt;tag-name&gt;</div></pre></td></tr></table></figure>
<hr>
<h1 id="文件内容追溯"><a href="#文件内容追溯" class="headerlink" title="文件内容追溯"></a>文件内容追溯</h1><h2 id="追溯整个文件的内容"><a href="#追溯整个文件的内容" class="headerlink" title="追溯整个文件的内容"></a>追溯整个文件的内容</h2><p>会逐行显示文件，在每一行的行首显示此行最早是在什么版本引入的，由谁引入的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git blame &lt;file&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ git blame readme.md</div><div class="line">^45496b8 (Jerry.Chen 2016-01-23 18:46:54 +0800 1) v1</div><div class="line">c7ded782 (Jerry.Chen 2016-01-23 18:47:08 +0800 2) v2</div><div class="line">adba38bc (Jerry.Chen 2016-01-23 18:47:35 +0800 3) v3</div><div class="line">45d9dfb1 (Jerry.Chen 2016-01-23 21:52:08 +0800 4) v4</div><div class="line">1c1e0188 (Jerry.Chen 2016-01-23 22:13:49 +0800 5) v5</div><div class="line">82fa9774 (Jerry.Chen 2016-01-23 23:37:39 +0800 6) v6</div></pre></td></tr></table></figure>
<h2 id="追溯指定的行号"><a href="#追溯指定的行号" class="headerlink" title="追溯指定的行号"></a>追溯指定的行号</h2><p><code>n</code>：起始行号；<code>m</code>：结束行号，如果未指定，则使用文件的最后一行的行号</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git blame -L &lt;n[,m]&gt; &lt;file&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ git blame readme.md -L 3</div><div class="line">adba38bc (Jerry.Chen 2016-01-23 18:47:35 +0800 3) v3</div><div class="line">45d9dfb1 (Jerry.Chen 2016-01-23 21:52:08 +0800 4) v4</div><div class="line">1c1e0188 (Jerry.Chen 2016-01-23 22:13:49 +0800 5) v5</div><div class="line">82fa9774 (Jerry.Chen 2016-01-23 23:37:39 +0800 6) v6</div><div class="line"></div><div class="line">$ git blame readme.md -L 3,4</div><div class="line">adba38bc (Jerry.Chen 2016-01-23 18:47:35 +0800 3) v3</div><div class="line">45d9dfb1 (Jerry.Chen 2016-01-23 21:52:08 +0800 4) v4</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-ls-files"><a href="#git-ls-files" class="headerlink" title="git ls-files"></a>git ls-files</h1><h2 id="显示暂存区和版本库中的文件"><a href="#显示暂存区和版本库中的文件" class="headerlink" title="显示暂存区和版本库中的文件"></a>显示暂存区和版本库中的文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git ls-files</div></pre></td></tr></table></figure>
<h2 id="查看历史版本的文件列表"><a href="#查看历史版本的文件列表" class="headerlink" title="查看历史版本的文件列表"></a>查看历史版本的文件列表</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git ls-files --with-tree=HEAD^</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-rm"><a href="#git-rm" class="headerlink" title="git rm"></a>git rm</h1><h2 id="工作区删除文件"><a href="#工作区删除文件" class="headerlink" title="工作区删除文件"></a>工作区删除文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rm &lt;file&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ git rm readme.md</div><div class="line">rm <span class="string">'readme.md'</span></div><div class="line"></div><div class="line">$ git status</div><div class="line">On branch master</div><div class="line">Changes to be committed:</div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        deleted:    readme.md</div></pre></td></tr></table></figure>
<h2 id="暂存区删除文件"><a href="#暂存区删除文件" class="headerlink" title="暂存区删除文件"></a>暂存区删除文件</h2><p>从暂存区删除文件，工作区不会删除。删除的文件在工作区存在，状态变为未追踪</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rm --cached &lt;file&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">$ git rm --cached readme.md</div><div class="line">rm <span class="string">'readme.md'</span></div><div class="line"></div><div class="line">$ git status</div><div class="line">On branch master</div><div class="line">Changes to be committed: <span class="comment">#暂存区有待提交的删除内容</span></div><div class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div><div class="line"></div><div class="line">        deleted:    readme.md</div><div class="line"></div><div class="line">Untracked files:       <span class="comment">#删除的文件在工作区存在，状态变为未追踪</span></div><div class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">        readme.md</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-clean"><a href="#git-clean" class="headerlink" title="git clean"></a>git clean</h1><h2 id="显示将要被删除的目录和文件"><a href="#显示将要被删除的目录和文件" class="headerlink" title="显示将要被删除的目录和文件"></a>显示将要被删除的目录和文件</h2><p>针对那些未被跟踪的文件和目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clean -nd</div></pre></td></tr></table></figure>
<h2 id="删除掉未被跟踪的文件和目录"><a href="#删除掉未被跟踪的文件和目录" class="headerlink" title="删除掉未被跟踪的文件和目录"></a>删除掉未被跟踪的文件和目录</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clean -fd</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-mv"><a href="#git-mv" class="headerlink" title="git mv"></a>git mv</h1><h2 id="移动或者重命名文件"><a href="#移动或者重命名文件" class="headerlink" title="移动或者重命名文件"></a>移动或者重命名文件</h2><p>如果移动或者重命名文件操作成功会添加到暂存区</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git mv [&lt;options&gt;] &lt;<span class="built_in">source</span>&gt;... &lt;destination&gt;</div></pre></td></tr></table></figure>
<p><code>-n | --dry-run</code>：演练移动或者重命名文件，看看操作是否会成功</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git mv -n | --dry-run &lt;<span class="built_in">source</span>&gt;... &lt;destination&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ git mv readme.md t1.md -n <span class="comment">#演练将readme.md重命名为t1.md</span></div><div class="line">Checking rename of <span class="string">'readme.md'</span> to <span class="string">'t1.md'</span></div><div class="line">Renaming readme.md to t1.md</div><div class="line"></div><div class="line">$ git status <span class="comment">#查看状态，没有修改的内容</span></div><div class="line">On branch master</div><div class="line">nothing to commit, working directory clean</div></pre></td></tr></table></figure>
<p><code>-f | --force</code>：强制移动或者重命名文件，不管目标是否已经存在</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git mv <span class="_">-f</span> | --force &lt;<span class="built_in">source</span>&gt;... &lt;destination&gt;</div></pre></td></tr></table></figure>
<hr>
<h1 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">log</span> 显示提交历史信息</div><div class="line">git <span class="built_in">log</span> &lt;branch&gt; 显示分支提交历史信息</div><div class="line">git <span class="built_in">log</span> -(n) 仅显示最近的n条提交</div><div class="line">git <span class="built_in">log</span> &lt;file&gt; 显示该文件提交信息  </div><div class="line">git <span class="built_in">log</span> -p 显示每次提交的内容差异  </div><div class="line">git <span class="built_in">log</span> -p -2 仅显示最近的两次更新  </div><div class="line">git <span class="built_in">log</span> --stat 显示简要的增改行数统计</div><div class="line">git <span class="built_in">log</span> --date-order --date=iso --graph --full-history --all --pretty=format:<span class="string">'%x08%x09%C(red)%h %C(cyan)%ad%x08%x08%x08%x08%x08%x08%x08%x08%x08%x08%x08%x08%x08%x08%x08 %C(bold blue)%aN%C(reset)%C(bold yellow)%d %C(reset)%s'</span></div><div class="line"> -p 按补丁格式显示每个更新之间的差异。</div><div class="line"> --stat 显示每次更新的文件修改统计信息。</div><div class="line"> --shortstat 只显示--stat 中最后的行数修改添加移除统计。</div><div class="line"> --name-only 仅在提交信息后显示已修改的文件清单。</div><div class="line"> --name-status 显示新增、修改、删除的文件清单。</div><div class="line"> --abbrev-commit 仅显示SHA-1 的前几个字符，而非所有的40 个字符。</div><div class="line"> --relative-date 使用较短的相对时间显示（比如，“2 weeks ago”）。</div><div class="line"> --graph 显示ASCII 图形表示的分支合并历史。</div><div class="line"> --pretty 使用其他格式显示历史提交信息。可用的选项包括oneline，short，full，fuller 和format（后跟指</div><div class="line">定格式）。</div><div class="line"> format选项说明</div><div class="line">  %H 提交对象（commit）的完整哈希字串</div><div class="line">  %h 提交对象的简短哈希字串</div><div class="line">  %T 树对象（tree）的完整哈希字串</div><div class="line">  %t 树对象的简短哈希字串</div><div class="line">  %P 父对象（parent）的完整哈希字串</div><div class="line">  %p 父对象的简短哈希字串</div><div class="line">  %an 作者（author）的名字</div><div class="line">  %ae 作者的电子邮件地址</div><div class="line">  %ad 作者修订日期（可以用-date= 选项定制格式）</div><div class="line">  %ar 作者修订日期，按多久以前的方式显示</div><div class="line">  %cn 提交者(committer)的名字</div><div class="line">  %ce 提交者的电子邮件地址</div><div class="line">  %<span class="built_in">cd</span> 提交日期</div><div class="line">  %cr 提交日期，按多久以前的方式显示</div><div class="line">  %s 提交说明</div><div class="line">git <span class="built_in">log</span> --pretty=<span class="string">"%h:%s"</span> --author=gitster --since=<span class="string">"2008-10-01"</span> --before=<span class="string">"2008-11-01"</span> --no-merges</div><div class="line">--since, --after 仅显示指定时间之后的提交。</div><div class="line">--until, --before 仅显示指定时间之前的提交。</div><div class="line">--author 仅显示指定作者相关的提交。</div><div class="line">--committer 仅显示指定提交者相关的提交。</div><div class="line">git <span class="built_in">log</span> --oneline --decorate 显示tag信息</div></pre></td></tr></table></figure>
<hr>
<h1 id="忽略文件"><a href="#忽略文件" class="headerlink" title="忽略文件"></a>忽略文件</h1><h2 id="工作区创建文件-gitignore"><a href="#工作区创建文件-gitignore" class="headerlink" title="工作区创建文件.gitignore"></a>工作区创建文件.gitignore</h2><p>工作区创建文件<code>.gitignore</code>，然后在里面添加忽略规则。<code>.gitignore</code>这个文件本身会提交到版本库中去，用来保存的是公共的需要排除的文件。<code>.gitignore</code>的语法规范如下：</p>
<ol>
<li>以<code>＃</code>开头的行是注释</li>
<li>以<code>/</code>做为行尾字符，则要忽略的是目录</li>
<li>以<code>!</code>做为行首字符，则是取反模式</li>
<li>空白行不做处理</li>
<li>支持正则表达模式匹配<br><code>*</code> 匹配零个或多个任意字符<br><code>[abc]</code> 匹配任何一个在方括号中的字符<br><code>?</code> 匹配任意一个字符<br><code>[0-9a-zA-Z]</code> 在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如<code>[0-9a-zA-Z]</code>表示匹配所有<code>0</code>到<code>9</code>的数字和所有字母）<br><code>\</code> 转义字符<br><code>[ ^abc]</code> 匹配不是<code>a</code>, <code>b</code>, <code>c</code>中任一字符即可<br><code>{ab,bb,cx}</code> 匹配<code>ab</code>, <code>bb</code>, <code>cx</code>中任一类型即可</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$ touch .gitignore</div><div class="line"></div><div class="line">$ ls <span class="_">-a</span></div><div class="line">./  ../  .git/  .gitignore  readme.md</div><div class="line"></div><div class="line">$ vi .gitignore</div><div class="line"></div><div class="line">.a        <span class="comment"># 忽略所有 .a 结尾的文件</span></div><div class="line">!lib.a    <span class="comment"># 但 lib.a 除外</span></div><div class="line">/TODO     <span class="comment"># 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO</span></div><div class="line">build/    <span class="comment"># 忽略 build/ 目录下的所有文件</span></div><div class="line">doc/*.txt <span class="comment"># 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt</span></div></pre></td></tr></table></figure>
<p><b>注意：</b><code>.gitignore</code>只能忽略那些没有被版本库追踪的文件，如果文件已经提交到了版本管理中，则在<code>.gitignore</code>中对这些文件的忽略是无效的，可以使用以下方式进行临时忽略</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git update-index --assume-unchanged /path/to/file     <span class="comment">#忽略跟踪</span></div><div class="line">git update-index --no-assume-unchanged /path/to/file  <span class="comment">#恢复跟踪</span></div></pre></td></tr></table></figure>
<p>但此方式在<code>git rebase</code>操作之后，这些被忽略的文件内容如果被修改过了，会被强制恢复到<code>git rebase</code>这个时候的版本内容。如果要从根本上忽略这些文件，请使用<code>git rm</code>删除掉这些文件，然后提交到版本库中</p>
<h2 id="编辑-git-info-exclude"><a href="#编辑-git-info-exclude" class="headerlink" title="编辑.git/info/exclude"></a>编辑.git/info/exclude</h2><p>独享忽略列表，不需要提交到版本库中，不会影响其他人</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vi .git/info/exclude</div></pre></td></tr></table></figure>
<h2 id="用户目录下的全局-gitignore"><a href="#用户目录下的全局-gitignore" class="headerlink" title="用户目录下的全局.gitignore"></a>用户目录下的全局.gitignore</h2><p>在用户目录下创建<code>~/.gitignore</code>文件，以同样的规则来添加哪些文件是不需要版本控制的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git config --global core.excludesfile ~/.gitignore <span class="comment">#需要执行此命令，才能是全局配置生效</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="git-grep"><a href="#git-grep" class="headerlink" title="git grep"></a>git grep</h1><h2 id="操作语法"><a href="#操作语法" class="headerlink" title="操作语法"></a>操作语法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git grep [&lt;options&gt;] [<span class="_">-e</span>] &lt;pattern&gt; [&lt;rev&gt;...] [[--] &lt;path&gt;...]</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git grep <span class="string">"工作区文件内容搜索"</span></div></pre></td></tr></table></figure>
<hr>
<h1 id="windows平台下的msysGit中shell环境配置"><a href="#windows平台下的msysGit中shell环境配置" class="headerlink" title="windows平台下的msysGit中shell环境配置"></a>windows平台下的msysGit中shell环境配置</h1><p><br>编辑配置文件<code>/etc/inputrc</code>，修改或者添加以下配置，重启后就能在<code>shell</code>界面输入中文</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># disable/enable 8bit input</span></div><div class="line"><span class="built_in">set</span> meta-flag on</div><div class="line"><span class="built_in">set</span> input-meta on</div><div class="line"><span class="built_in">set</span> output-meta on</div><div class="line"><span class="built_in">set</span> convert-meta off</div></pre></td></tr></table></figure>
<p><code>ls</code>命令显示中文，将<code>alias</code>命令添加到配置文件<code>/etc/profile</code>中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">alias</span> ls=<span class="string">'ls --show-control-chars --color=auto'</span></div><div class="line"><span class="built_in">alias</span> gitk=<span class="string">'gitk --all'</span> <span class="comment">#设置别名</span></div></pre></td></tr></table></figure>
<p>解决<code>gitk</code>和<code>Git Gui</code>乱码，在<code>/etc/gitconfig</code>中添加或修改以下配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[gui]</div><div class="line">    encoding = utf-8</div></pre></td></tr></table></figure>
<p>在<code>/etc/git-completion.bash</code>末尾位置添加<code>cd /d</code>，可以让<code>msysGit</code>打开定位到<code>D</code>盘</p>
<hr>
<h1 id="windows平台下的msysGit工具"><a href="#windows平台下的msysGit工具" class="headerlink" title="windows平台下的msysGit工具"></a>windows平台下的msysGit工具</h1><h2 id="gitk"><a href="#gitk" class="headerlink" title="gitk"></a>gitk</h2><p>显示所有的分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gitk --all</div></pre></td></tr></table></figure>
<p>显示某天以来的所有提交</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gitk --since=<span class="string">"[YYYY-MM-dd]|[2 days ago][2 weeks ago]..."</span></div></pre></td></tr></table></figure>
<h2 id="gui"><a href="#gui" class="headerlink" title="gui"></a>gui</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git gui</div></pre></td></tr></table></figure>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div style="margin:0 0 10px 0;">您的赞赏将鼓励我继续分享！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span onmouseover="this.style.color='rgb(236,96,0)';this.style.background='rgb(204,204,204)'" onMouseOut="this.style.color='#fff';this.style.background='rgb(236,96,0)'" style="display: inline-block; width: 70px; height: 70px; border-radius: 100%; line-height: 81px; color: #fff; font: 400 35px/75px 'microsofty'; background: rgb(236,96,0)">赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/images/reward/wechat-reward-1.png" alt="Jerry WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/images/reward/alipay-reward-1.png" alt="Jerry Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/开发配置/" rel="tag"># 开发配置</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/IntelliJ-Idea-快捷键映射/" rel="next" title="IntelliJ Idea 快捷键映射">
                <i class="fa fa-chevron-left"></i> IntelliJ Idea 快捷键映射
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/IntelliJ-Idea-配置同步/" rel="prev" title="IntelliJ Idea 配置同步">
                IntelliJ Idea 配置同步 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars1.githubusercontent.com/u/6986459?v=3&s=460"
               alt="Jerry" />
          <p class="site-author-name" itemprop="name">Jerry</p>
           
              <p class="site-description motion-element" itemprop="description">好记性不如烂笔头</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/myoss" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/jerry.chen" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://my.oschina.net/ayao/blog" target="_blank" title="OSChina">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  OSChina
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.sina.com.cn/ayao8" target="_blank" title="Sina">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Sina
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="/2016/Git操作" target="_blank" title="Git操作">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Git操作
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://myoss.github.io/git-guide/index.zh.html" title="Git Guide" target="_blank">Git Guide</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#git-config"><span class="nav-number">1.</span> <span class="nav-text">git config</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#配置优先级"><span class="nav-number">1.1.</span> <span class="nav-text">配置优先级</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#选项"><span class="nav-number">1.2.</span> <span class="nav-text">选项</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#查看生效的配置"><span class="nav-number">1.2.1.</span> <span class="nav-text">查看生效的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看某个参数的配置"><span class="nav-number">1.2.2.</span> <span class="nav-text">查看某个参数的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置用户名称和用户Email地址"><span class="nav-number">1.2.3.</span> <span class="nav-text">设置用户名称和用户Email地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#换行符：CRLF-LF"><span class="nav-number">1.2.4.</span> <span class="nav-text">换行符：CRLF/LF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#换行符：SafeCRLF"><span class="nav-number">1.2.5.</span> <span class="nav-text">换行符：SafeCRLF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#core-quotepath"><span class="nav-number">1.2.6.</span> <span class="nav-text">core.quotepath</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其它配置"><span class="nav-number">1.2.7.</span> <span class="nav-text">其它配置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#工作区"><span class="nav-number">2.</span> <span class="nav-text">工作区</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#暂存区"><span class="nav-number">3.</span> <span class="nav-text">暂存区</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#版本库"><span class="nav-number">4.</span> <span class="nav-text">版本库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#工作区-暂存区-版本库，三者的关系图"><span class="nav-number">4.1.</span> <span class="nav-text">工作区/暂存区/版本库，三者的关系图</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HEAD"><span class="nav-number">5.</span> <span class="nav-text">HEAD</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#查看快照"><span class="nav-number">5.1.</span> <span class="nav-text">查看快照</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看引用日志的输出"><span class="nav-number">5.2.</span> <span class="nav-text">查看引用日志的输出</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SSH-Key"><span class="nav-number">6.</span> <span class="nav-text">SSH Key</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#查看已经保存的SSH密钥"><span class="nav-number">6.1.</span> <span class="nav-text">查看已经保存的SSH密钥</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#生成SSH密钥"><span class="nav-number">6.2.</span> <span class="nav-text">生成SSH密钥</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-clone"><span class="nav-number">7.</span> <span class="nav-text">git clone</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#包含工作区的版本库"><span class="nav-number">7.1.</span> <span class="nav-text">包含工作区的版本库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#裸版本库，不包含工作区"><span class="nav-number">7.2.</span> <span class="nav-text">裸版本库，不包含工作区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#支持的多种协议"><span class="nav-number">7.3.</span> <span class="nav-text">支持的多种协议</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-remote"><span class="nav-number">8.</span> <span class="nav-text">git remote</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#查看当前工作目录的远程仓库信息"><span class="nav-number">8.1.</span> <span class="nav-text">查看当前工作目录的远程仓库信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#添加远程仓库"><span class="nav-number">8.2.</span> <span class="nav-text">添加远程仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改远程仓库的url地址"><span class="nav-number">8.3.</span> <span class="nav-text">修改远程仓库的url地址</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改某个远程仓库的简写名称"><span class="nav-number">8.4.</span> <span class="nav-text">修改某个远程仓库的简写名称</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#移除某个远程仓库的配置信息，不会删除任何文件"><span class="nav-number">8.5.</span> <span class="nav-text">移除某个远程仓库的配置信息，不会删除任何文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-fetch"><span class="nav-number">9.</span> <span class="nav-text">git fetch</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#拉取远程仓库的更新数据"><span class="nav-number">9.1.</span> <span class="nav-text">拉取远程仓库的更新数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#拉取所有远程仓库"><span class="nav-number">9.2.</span> <span class="nav-text">拉取所有远程仓库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-pull"><span class="nav-number">10.</span> <span class="nav-text">git pull</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#获取远程仓库的更新数据，再自动合并到本地仓库中的当前分支"><span class="nav-number">10.1.</span> <span class="nav-text">获取远程仓库的更新数据，再自动合并到本地仓库中的当前分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取远程仓库的更新数据，再自动合并到本地仓库中的其它分支"><span class="nav-number">10.2.</span> <span class="nav-text">获取远程仓库的更新数据，再自动合并到本地仓库中的其它分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取远程仓库上所有的tag"><span class="nav-number">10.3.</span> <span class="nav-text">获取远程仓库上所有的tag</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-push"><span class="nav-number">11.</span> <span class="nav-text">git push</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#将本地分支的更新，推送到远程仓库"><span class="nav-number">11.1.</span> <span class="nav-text">将本地分支的更新，推送到远程仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除远程仓库的分支"><span class="nav-number">11.2.</span> <span class="nav-text">删除远程仓库的分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#强制更新，覆盖的方式推送"><span class="nav-number">11.3.</span> <span class="nav-text">强制更新，覆盖的方式推送</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#推送标签"><span class="nav-number">11.4.</span> <span class="nav-text">推送标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#推送所有的标签"><span class="nav-number">11.5.</span> <span class="nav-text">推送所有的标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#推送本地所有的分支，不包含标签"><span class="nav-number">11.6.</span> <span class="nav-text">推送本地所有的分支，不包含标签</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-init"><span class="nav-number">12.</span> <span class="nav-text">git init</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#初始化本地仓库"><span class="nav-number">12.1.</span> <span class="nav-text">初始化本地仓库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-add"><span class="nav-number">13.</span> <span class="nav-text">git add</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#添加未跟踪的文件"><span class="nav-number">13.1.</span> <span class="nav-text">添加未跟踪的文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#添加已经追踪的文件"><span class="nav-number">13.2.</span> <span class="nav-text">添加已经追踪的文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#巧用git-add，快速回退测试代码"><span class="nav-number">13.3.</span> <span class="nav-text">巧用git add，快速回退测试代码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-status"><span class="nav-number">14.</span> <span class="nav-text">git status</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#查看当前分支的文件变化状态"><span class="nav-number">14.1.</span> <span class="nav-text">查看当前分支的文件变化状态</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看精简状态"><span class="nav-number">14.2.</span> <span class="nav-text">查看精简状态</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-cherry"><span class="nav-number">15.</span> <span class="nav-text">git cherry</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#查看本地分支领先远程仓库的提交"><span class="nav-number">15.1.</span> <span class="nav-text">查看本地分支领先远程仓库的提交</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-diff"><span class="nav-number">16.</span> <span class="nav-text">git diff</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#比较工作区和暂存区"><span class="nav-number">16.1.</span> <span class="nav-text">比较工作区和暂存区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#逐词比较，而非默认的逐行比较"><span class="nav-number">16.2.</span> <span class="nav-text">逐词比较，而非默认的逐行比较</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较暂存区和HEAD（本地git仓库）"><span class="nav-number">16.3.</span> <span class="nav-text">比较暂存区和HEAD（本地git仓库）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较工作区和HEAD（本地git仓库）"><span class="nav-number">16.4.</span> <span class="nav-text">比较工作区和HEAD（本地git仓库）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较两个提交"><span class="nav-number">16.5.</span> <span class="nav-text">比较两个提交</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较两个分支"><span class="nav-number">16.6.</span> <span class="nav-text">比较两个分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较两个远程分支"><span class="nav-number">16.7.</span> <span class="nav-text">比较两个远程分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#当前分支比较另外一个分支"><span class="nav-number">16.8.</span> <span class="nav-text">当前分支比较另外一个分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较之后，显示简要的增改行数统计"><span class="nav-number">16.9.</span> <span class="nav-text">比较之后，显示简要的增改行数统计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较二进制文件差异"><span class="nav-number">16.10.</span> <span class="nav-text">比较二进制文件差异</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-stash"><span class="nav-number">17.</span> <span class="nav-text">git stash</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#储藏当前工作区和暂存区修改的内容"><span class="nav-number">17.1.</span> <span class="nav-text">储藏当前工作区和暂存区修改的内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#储藏的完整命令"><span class="nav-number">17.2.</span> <span class="nav-text">储藏的完整命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看已经保存的储藏列表"><span class="nav-number">17.3.</span> <span class="nav-text">查看已经保存的储藏列表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除储藏"><span class="nav-number">17.4.</span> <span class="nav-text">删除储藏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除所有的储藏"><span class="nav-number">17.5.</span> <span class="nav-text">删除所有的储藏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看-某次-储藏修改的内容"><span class="nav-number">17.6.</span> <span class="nav-text">查看[某次]储藏修改的内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#恢复保存的工作进度"><span class="nav-number">17.7.</span> <span class="nav-text">恢复保存的工作进度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用储藏的内容创建新的分支"><span class="nav-number">17.8.</span> <span class="nav-text">使用储藏的内容创建新的分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看储藏列表的SHA-1值"><span class="nav-number">17.9.</span> <span class="nav-text">查看储藏列表的SHA-1值</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-commit"><span class="nav-number">18.</span> <span class="nav-text">git commit</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#仓库中的文件可能存在于这三种状态"><span class="nav-number">18.1.</span> <span class="nav-text">仓库中的文件可能存在于这三种状态</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#提交暂存区的内容"><span class="nav-number">18.2.</span> <span class="nav-text">提交暂存区的内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#提交暂存区和工作区的内容"><span class="nav-number">18.3.</span> <span class="nav-text">提交暂存区和工作区的内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改或者撤销最后一次提交"><span class="nav-number">18.4.</span> <span class="nav-text">修改或者撤销最后一次提交</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-checkout"><span class="nav-number">19.</span> <span class="nav-text">git checkout</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#汇总显示（工作区和暂存区）与HEAD的差异"><span class="nav-number">19.1.</span> <span class="nav-text">汇总显示（工作区和暂存区）与HEAD的差异</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#撤销工作区的修改"><span class="nav-number">19.2.</span> <span class="nav-text">撤销工作区的修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用HEAD中的内容替换暂存区和工作区的修改"><span class="nav-number">19.3.</span> <span class="nav-text">用HEAD中的内容替换暂存区和工作区的修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用其它分支的内容替换当前分支上暂存区和工作区的内容"><span class="nav-number">19.4.</span> <span class="nav-text">使用其它分支的内容替换当前分支上暂存区和工作区的内容</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-reset"><span class="nav-number">20.</span> <span class="nav-text">git reset</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本操作"><span class="nav-number">20.1.</span> <span class="nav-text">基本操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重置暂存区"><span class="nav-number">20.2.</span> <span class="nav-text">重置暂存区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实战：两个提交压缩为一个"><span class="nav-number">20.3.</span> <span class="nav-text">实战：两个提交压缩为一个</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-rebase"><span class="nav-number">21.</span> <span class="nav-text">git rebase</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#交互式变基操作"><span class="nav-number">21.1.</span> <span class="nav-text">交互式变基操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#将其它分支上的修改应用到当前分支"><span class="nav-number">21.2.</span> <span class="nav-text">将其它分支上的修改应用到当前分支</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-branch"><span class="nav-number">22.</span> <span class="nav-text">git branch</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#显示所有分支信息"><span class="nav-number">22.1.</span> <span class="nav-text">显示所有分支信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建新分支"><span class="nav-number">22.2.</span> <span class="nav-text">创建新分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重命名分支"><span class="nav-number">22.3.</span> <span class="nav-text">重命名分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除分支"><span class="nav-number">22.4.</span> <span class="nav-text">删除分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看已经合并到当前分支的分支"><span class="nav-number">22.5.</span> <span class="nav-text">查看已经合并到当前分支的分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看没有合并到当前分支的分支"><span class="nav-number">22.6.</span> <span class="nav-text">查看没有合并到当前分支的分支</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-merge"><span class="nav-number">23.</span> <span class="nav-text">git merge</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本操作-1"><span class="nav-number">23.1.</span> <span class="nav-text">基本操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#不要Fast-Foward合并，会生成merge提交信息"><span class="nav-number">23.2.</span> <span class="nav-text">不要Fast-Foward合并，会生成merge提交信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#将分支合并到当前分支"><span class="nav-number">23.3.</span> <span class="nav-text">将分支合并到当前分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#终止合并操作"><span class="nav-number">23.4.</span> <span class="nav-text">终止合并操作</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-tag"><span class="nav-number">24.</span> <span class="nav-text">git tag</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#创建轻量级标签"><span class="nav-number">24.1.</span> <span class="nav-text">创建轻量级标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建含附注标签"><span class="nav-number">24.2.</span> <span class="nav-text">创建含附注标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GPG签署工作"><span class="nav-number">24.3.</span> <span class="nav-text">GPG签署工作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看所有的标签"><span class="nav-number">24.4.</span> <span class="nav-text">查看所有的标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#标签匹配查询"><span class="nav-number">24.5.</span> <span class="nav-text">标签匹配查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看标签的信息"><span class="nav-number">24.6.</span> <span class="nav-text">查看标签的信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除标签"><span class="nav-number">24.7.</span> <span class="nav-text">删除标签</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件内容追溯"><span class="nav-number">25.</span> <span class="nav-text">文件内容追溯</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#追溯整个文件的内容"><span class="nav-number">25.1.</span> <span class="nav-text">追溯整个文件的内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#追溯指定的行号"><span class="nav-number">25.2.</span> <span class="nav-text">追溯指定的行号</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-ls-files"><span class="nav-number">26.</span> <span class="nav-text">git ls-files</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#显示暂存区和版本库中的文件"><span class="nav-number">26.1.</span> <span class="nav-text">显示暂存区和版本库中的文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看历史版本的文件列表"><span class="nav-number">26.2.</span> <span class="nav-text">查看历史版本的文件列表</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-rm"><span class="nav-number">27.</span> <span class="nav-text">git rm</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#工作区删除文件"><span class="nav-number">27.1.</span> <span class="nav-text">工作区删除文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#暂存区删除文件"><span class="nav-number">27.2.</span> <span class="nav-text">暂存区删除文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-clean"><span class="nav-number">28.</span> <span class="nav-text">git clean</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#显示将要被删除的目录和文件"><span class="nav-number">28.1.</span> <span class="nav-text">显示将要被删除的目录和文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除掉未被跟踪的文件和目录"><span class="nav-number">28.2.</span> <span class="nav-text">删除掉未被跟踪的文件和目录</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-mv"><span class="nav-number">29.</span> <span class="nav-text">git mv</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#移动或者重命名文件"><span class="nav-number">29.1.</span> <span class="nav-text">移动或者重命名文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-log"><span class="nav-number">30.</span> <span class="nav-text">git log</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#忽略文件"><span class="nav-number">31.</span> <span class="nav-text">忽略文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#工作区创建文件-gitignore"><span class="nav-number">31.1.</span> <span class="nav-text">工作区创建文件.gitignore</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编辑-git-info-exclude"><span class="nav-number">31.2.</span> <span class="nav-text">编辑.git/info/exclude</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户目录下的全局-gitignore"><span class="nav-number">31.3.</span> <span class="nav-text">用户目录下的全局.gitignore</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-grep"><span class="nav-number">32.</span> <span class="nav-text">git grep</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#操作语法"><span class="nav-number">32.1.</span> <span class="nav-text">操作语法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#windows平台下的msysGit中shell环境配置"><span class="nav-number">33.</span> <span class="nav-text">windows平台下的msysGit中shell环境配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#windows平台下的msysGit工具"><span class="nav-number">34.</span> <span class="nav-text">windows平台下的msysGit工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#gitk"><span class="nav-number">34.1.</span> <span class="nav-text">gitk</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gui"><span class="nav-number">34.2.</span> <span class="nav-text">gui</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jerry</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      本站访客数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      本站总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://myoss.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://myoss.github.io/2016/Git操作/';
          this.page.identifier = '2016/Git操作/';
          this.page.title = 'Git操作';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://myoss.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  





  








  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("UkL0nPhjdELnTDIQSpNgWpUc-gzGzoHsz", "HlYcuUYr5IlDSbtWWpWLG5VP");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  

  <a href="https://github.com/myoss" target="_blank"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>
</body>
</html>
